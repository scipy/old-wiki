<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!-- Mirrored from localhost:8080/Cookbook/SWIG_NumPy_examples?highlight=%28%28Cookbook%7CSWIG_Memory_Deallocation%29%29 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 23:19:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="edit_on_doubleclick" content="/">
<meta name="robots" content="noindex,nofollow">

<title>Cookbook/SWIG_NumPy_examples - SciPy wiki dump</title>
<script type="text/javascript" src="../moin_static197/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="../moin_static197/modern/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="../moin_static197/modern/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="../moin_static197/modern/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="../moin_static197/modern/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="SciPy: Cookbook/SWIG_NumPy_examples" href="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=Cookbook%2FSWIG_NumPy_examples&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="../AllPages.html">
<link rel="Alternate" title="Wiki Markup" href="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples?action=raw">
<link rel="Alternate" media="print" title="Print View" href="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples?action=print">
<link rel="Up" href="../Cookbook.html">
<link rel="Search" href="../FindPage.html">
<link rel="Index" href="../TitleIndex.html">
<link rel="Glossary" href="../WordIndex.html">
<link rel="Help" href="../HelpOnFormatting.html">
</head>

<body  lang="en" dir="ltr"><div style="background: white; width:100%; padding:2em;">This is an archival dump of old wiki content --- see <a href="http://scipy.org/">scipy.org</a> for current material</div>

<div id="header">


<form id="searchform" method="get" action="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="SWIG_NumPy_examples456e.html?action=login" id="login" rel="nofollow">Login</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="../AllPages.html" rel="nofollow">SciPy</a></span></div>

<ul id="pagelocation">
<li><a href="../Cookbook.html">Cookbook</a></li><li><a class="backlink" href="SWIG_NumPy_examples4bc9.html?action=fullsearch&amp;context=180&amp;value=linkto%3A%22Cookbook%2FSWIG_NumPy_examples%22" rel="nofollow" title="Click to do a full-text search for this title">SWIG_NumPy_examples</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="../RecentChanges.html">RecentChanges</a></li><li class="wikilink"><a class="nonexistent" href="../FindPage.html">FindPage</a></li><li class="wikilink"><a class="nonexistent" href="../HelpContents.html">HelpContents</a></li><li class="current"><a href="SWIG_NumPy_examples.html">SWIG_NumPy_examples</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="SWIG_NumPy_examples37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<h1 id="Table_of_Contents">Table of Contents</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Table_of_Contents">Table of Contents</a></li><li>
<a href="#Introduction">Introduction</a></li><li>
<a href="#Initial_setup">Initial setup</a><ol><li>
<a href="#gcc_and_SWIG">gcc and SWIG</a></li><li>
<a href="#Modifying_the_pyfragments.swg_file_.28MinGW_only.29">Modifying the pyfragments.swg file (MinGW only)</a></li><li>
<a href="#Compilation_and_testing">Compilation and testing</a></li></ol></li><li>
<a href="#A_simple_ARGOUT_ARRAY1_example">A simple ARGOUT_ARRAY1 example</a><ol><li>
<a href="#The_C_source_.28ezrange.c_and_ezrange.h.29">The C source (ezrange.c and ezrange.h)</a></li><li>
<a href="#The_interface_file_.28ezrange.i.29">The interface file (ezrange.i)</a></li><li>
<a href="#Setup_file_.28setup.py.29">Setup file (setup.py)</a></li><li>
<a href="#Compiling_the_module">Compiling the module</a></li><li>
<a href="#Testing_the_module">Testing the module</a></li></ol></li><li>
<a href="#A_simple_INPLACE_ARRAY1_example">A simple INPLACE_ARRAY1 example</a><ol><li>
<a href="#The_C_source_.28inplace.c_and_inplace.h.29">The C source (inplace.c and inplace.h)</a></li><li>
<a href="#The_interface_file_.28inplace.i.29">The interface file (inplace.i)</a></li><li>
<a href="#Setup_file_.28setup.py.29-1">Setup file (setup.py)</a></li><li>
<a href="#Compiling_the_module-1">Compiling the module</a></li><li>
<a href="#Testing_the_module-1">Testing the module</a></li></ol></li><li>
<a href="#A_simple_ARGOUTVIEW_ARRAY1_example">A simple ARGOUTVIEW_ARRAY1 example</a><ol><li>
<a href="#Big_fat_multiple_warnings">Big fat multiple warnings</a></li><li>
<a href="#The_C_source_.28ezview.c_and_ezview.h.29">The C source (ezview.c and ezview.h)</a></li><li>
<a href="#The_interface_file_.28ezview.i.29">The interface file (ezview.i)</a></li><li>
<a href="#Setup_file_.28setup.py.29-2">Setup file (setup.py)</a></li><li>
<a href="#Compiling_the_module-2">Compiling the module</a></li><li>
<a href="#Testing_the_module-2">Testing the module</a></li></ol></li><li>
<a href="#Error_handling_using_errno_and_python_exceptions">Error handling using errno and python exceptions</a><ol><li>
<a href="#The_C_source_.28ezerr.c_and_ezerr.h.29">The C source (ezerr.c and ezerr.h)</a></li><li>
<a href="#The_interface_file_.28ezerr.i.29">The interface file (ezerr.i)</a></li><li>
<a href="#Setup_file_.28setup.py.29-3">Setup file (setup.py)</a></li><li>
<a href="#Compiling_the_module-3">Compiling the module</a></li><li>
<a href="#Testing_the_module-3">Testing the module</a></li></ol></li><li>
<a href="#Dot_product_example_.28from_Bill_Spotz.27s_article.29">Dot product example (from Bill Spotz's article)</a><ol><li>
<a href="#The_C_source_.28dot.c_and_dot.h.29">The C source (dot.c and dot.h)</a></li><li>
<a href="#The_interface_files_.28dot.i_and_numpy.i.29">The interface files (dot.i and numpy.i)</a></li><li>
<a href="#Setup_file_.28setup.py.29-4">Setup file (setup.py)</a></li><li>
<a href="#Compiling_the_module-4">Compiling the module</a></li><li>
<a href="#Testing">Testing</a></li></ol></li><li>
<a href="#Conclusion">Conclusion</a></li></ol></div><p class="line874"> <span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line867">
<h1 id="Introduction">Introduction</h1>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line862">These are simple NumPy and SWIG examples which use the numpy.i interface file. There is also a MinGW section for people who may want to use these in a Win32 environment. The following code is C, rather than C++. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line862">The information contained here was first made available by Bill Spotz in his article <em>numpy.i: a SWIG Interface File for NumPy</em>, and the NumPy SVN which can be checked out using the following command: <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line867"><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><pre><span class="anchor" id="line-1-1"></span>svn co http://scipy.org/svn/numpy/trunk numpy</pre><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><ul><li><p class="line862">The NumPy+SWIG manual is available here: <a class="http" href="../../external.html?link=http://scipy.org/svn/numpy/trunk/doc/swig/doc/numpy_swig.pdf">http://scipy.org/svn/numpy/trunk/doc/swig/doc/numpy_swig.pdf</a> <span class="anchor" id="line-16"></span></li><li><p class="line862">The numpy.i file can be downloaded from the SVN: <a class="http" href="../../external.html?link=http://scipy.org/svn/numpy/trunk/doc/swig/numpy.i">http://scipy.org/svn/numpy/trunk/doc/swig/numpy.i</a> <span class="anchor" id="line-17"></span></li><li><p class="line862">and the pyfragments.swg file, hich is also needed, is available from <a class="http" href="../../external.html?link=http://scipy.org/svn/numpy/trunk/doc/swig/pyfragments.swg">http://scipy.org/svn/numpy/trunk/doc/swig/pyfragments.swg</a> <span class="anchor" id="line-18"></span></li><li><p class="line862">These two files (and others) are also available in the numpy source tarball: <a class="http" href="../../external.html?link=http://sourceforge.net/project/showfiles.php?group_id=1369&amp;package_id=175103">http://sourceforge.net/project/showfiles.php?group_id=1369&amp;package_id=175103</a> <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span></li></ul><p class="line867">
<h1 id="Initial_setup">Initial setup</h1>
<span class="anchor" id="line-21"></span><p class="line867">
<h2 id="gcc_and_SWIG">gcc and SWIG</h2>
<span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line874">Check that both gcc and SWIG are available (paths known): <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><pre><span class="anchor" id="line-1-2"></span>swig -version</pre><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line874">and  <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line867"><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><pre><span class="anchor" id="line-1-3"></span>gcc -v</pre><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line874">Both should output some text... <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><p class="line867">
<h2 id="Modifying_the_pyfragments.swg_file_.28MinGW_only.29">Modifying the pyfragments.swg file (MinGW only)</h2>
<span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line862">This is from my own tests, running SWIG Version 1.3.36 and gcc version 3.4.5 (mingw-vista special r3). I had to remove the 'static' statements from the source, otherwise your SWIGed sources won't compile. There are only two 'static' statements in the file, both will need removing. Here is my modified version: <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/pyfragments.swg">pyfragments.swg</a> <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><p class="line867">
<h2 id="Compilation_and_testing">Compilation and testing</h2>
<span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line862">A setup.py file specific to each module must be written first. I based mine on the reference setup.py available in <a class="http" href="../../external.html?link=http://scipy.org/svn/numpy/trunk/doc/swig/test/">http://scipy.org/svn/numpy/trunk/doc/swig/test/</a> with added automatic handling of swig. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line874">On a un*x like system, the command-line is: <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><pre><span class="anchor" id="line-1-4"></span>python setup.py build</pre><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">In a Win32 environment (either cygwin or cmd), the setup command-line is (for use with MinGW): <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><pre><span class="anchor" id="line-1-5"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line862">The command handles both the SWIG process (generation of wrapper C and Python code) and gcc compilation. The resulting module (a pyd file) is built in the <tt class="backtick">build\lib.XXX</tt> directory (e.g. for a Python 2.5 install and on a Win32 machine, the <tt class="backtick">build\lib.win32-2.5</tt> directory). <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><p class="line867">
<h1 id="A_simple_ARGOUT_ARRAY1_example">A simple ARGOUT_ARRAY1 example</h1>
<span class="anchor" id="line-57"></span><p class="line862">This is a re-implementation of the range function. The module is called ezrange. One thing to remember with <tt class="backtick">ARGOUT_ARRAY1</tt> is that the dimension of the array must be passed from Python. <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><p class="line862">From Bill Spotz's article: <em>The python user does not pass these arrays in, they simply get returned. For the case where a dimension is specified, the python user must provide that dimension as an argument.</em> <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><p class="line862">This is useful for functions like <tt class="backtick">numpy.arange(N)</tt>, for which the size of the returned array is known in advance and passed to the C function. <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line862">For functions that follow <tt class="backtick">array_out&nbsp;=&nbsp;function(array_in)</tt> where the size of array_out is <em>not</em> known in advance and depends on memory allocated in C, see the example given in <a href="SWIG_Memory_Deallocation.html"><strong class="highlight">Cookbook</strong>/<strong class="highlight">SWIG_Memory_Deallocation</strong></a>.  <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><p class="line867">
<h2 id="The_C_source_.28ezrange.c_and_ezrange.h.29">The C source (ezrange.c and ezrange.h)</h2>
<span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezrange.h">ezrange.h</a> file: <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-1-6"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-63f5b2d16c6c12c064f1b0d6b63d3fb3b848c946\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-63f5b2d16c6c12c064f1b0d6b63d3fb3b848c946" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-63f5b2d16c6c12c064f1b0d6b63d3fb3b848c946_1">   1</a> </span><span class="LineAnchor" id="CA-63f5b2d16c6c12c064f1b0d6b63d3fb3b848c946_1"></span><span class="anchor" id="line-1-7"></span><span class="ResWord">void</span> <span class="ID">range</span>(<span class="ResWord">int</span> *<span class="ID">rangevec</span>, <span class="ResWord">int</span> <span class="ID">n</span>);</span>
</pre></div></div><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezrange.c">ezrange.c</a> file: <span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-1-8"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5f258c87b3ac4f44620787e51db395f5059a79b2\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_1">   1</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_1"></span><span class="anchor" id="line-1-9"></span><span class="ResWord">void</span> <span class="ID">range</span>(<span class="ResWord">int</span> *<span class="ID">rangevec</span>, <span class="ResWord">int</span> <span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_2">   2</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_2"></span><span class="anchor" id="line-2-1"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_3">   3</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_3"></span><span class="anchor" id="line-3-1"></span>    <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_4">   4</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_4"></span><span class="anchor" id="line-4-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_5">   5</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_5"></span><span class="anchor" id="line-5-1"></span>    <span class="ResWord">for</span> (<span class="ID">i</span>=<span class="Number">0</span>; <span class="ID">i</span>&lt; <span class="ID">n</span>; <span class="ID">i</span>++)</span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_6">   6</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_6"></span><span class="anchor" id="line-6-1"></span>        <span class="ID">rangevec</span>[<span class="ID">i</span>] = <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-5f258c87b3ac4f44620787e51db395f5059a79b2_7">   7</a> </span><span class="LineAnchor" id="CA-5f258c87b3ac4f44620787e51db395f5059a79b2_7"></span><span class="anchor" id="line-7-1"></span>}</span>
</pre></div></div><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><p class="line867">
<h2 id="The_interface_file_.28ezrange.i.29">The interface file (ezrange.i)</h2>
<span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezrange.i">ezrange.i</a> file. <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-1-10"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b040a78673addb4c9199d37339c8b790a211d4e1\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_1">   1</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_1"></span><span class="anchor" id="line-1-11"></span>%<span class="ID">module</span> <span class="ID">ezrange</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_2">   2</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_2"></span><span class="anchor" id="line-2-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_3">   3</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_3"></span><span class="anchor" id="line-3-2"></span>%{</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_4">   4</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_4"></span><span class="anchor" id="line-4-2"></span>    <span class="Preprc">#</span><span class="Preprc">define SWIG_FILE_WITH_INIT</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_5">   5</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_5"></span><span class="anchor" id="line-5-2"></span><span class="Preprc"></span>    <span class="Preprc">#</span><span class="Preprc">include &quot;ezrange.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_6">   6</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_6"></span><span class="anchor" id="line-6-2"></span><span class="Preprc"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_7">   7</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_7"></span><span class="anchor" id="line-7-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_8">   8</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_8"></span><span class="anchor" id="line-8-1"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">numpy.i</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_9">   9</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_9"></span><span class="anchor" id="line-9-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_10">  10</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_10"></span><span class="anchor" id="line-10-1"></span>%<span class="ID">init</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_11">  11</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_11"></span><span class="anchor" id="line-11-1"></span>    <span class="ID">import_array</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_12">  12</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_12"></span><span class="anchor" id="line-12-1"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_13">  13</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_13"></span><span class="anchor" id="line-13-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_14">  14</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_14"></span><span class="anchor" id="line-14-1"></span>%<span class="ID">apply</span> (<span class="ResWord">int</span>* <span class="ID">ARGOUT_ARRAY1</span>, <span class="ResWord">int</span> <span class="ID">DIM1</span>) {(<span class="ResWord">int</span>* <span class="ID">rangevec</span>, <span class="ResWord">int</span> <span class="ID">n</span>)}</span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_15">  15</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_15"></span><span class="anchor" id="line-15-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-b040a78673addb4c9199d37339c8b790a211d4e1_16">  16</a> </span><span class="LineAnchor" id="CA-b040a78673addb4c9199d37339c8b790a211d4e1_16"></span><span class="anchor" id="line-16-1"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">ezrange.h</span><span class="String">&quot;</span></span>
</pre></div></div><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><p class="line862">Don't forget that you will also need the <a class="http" href="../../external.html?link=http://scipy.org/svn/numpy/trunk/doc/swig/numpy.i">numpy.i</a> file in the same directory. <span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><p class="line867">
<h2 id="Setup_file_.28setup.py.29">Setup file (setup.py)</h2>
<span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><p class="line862">This is my <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/setup_range.py">setup.py</a> file: <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-1-12"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_1">   1</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_1"></span><span class="anchor" id="line-1-13"></span><span class="Comment">#! /usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_2">   2</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_2"></span><span class="anchor" id="line-2-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_3">   3</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_3"></span><span class="anchor" id="line-3-3"></span><span class="Comment"># System imports</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_4">   4</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_4"></span><span class="anchor" id="line-4-3"></span><span class="ResWord">from</span> <span class="ID">distutils.core</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_5">   5</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_5"></span><span class="anchor" id="line-5-3"></span><span class="ResWord">from</span> <span class="ID">distutils</span>      <span class="ResWord">import</span> <span class="ID">sysconfig</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_6">   6</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_6"></span><span class="anchor" id="line-6-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_7">   7</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_7"></span><span class="anchor" id="line-7-3"></span><span class="Comment"># Third-party modules - we depend on numpy for everything</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_8">   8</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_8"></span><span class="anchor" id="line-8-2"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_9">   9</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_9"></span><span class="anchor" id="line-9-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_10">  10</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_10"></span><span class="anchor" id="line-10-2"></span><span class="Comment"># Obtain the numpy include directory.  This logic works across numpy versions.</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_11">  11</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_11"></span><span class="anchor" id="line-11-2"></span><span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_12">  12</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_12"></span><span class="anchor" id="line-12-2"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_13">  13</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_13"></span><span class="anchor" id="line-13-2"></span><span class="ResWord">except</span> <span class="ID">AttributeError</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_14">  14</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_14"></span><span class="anchor" id="line-14-2"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_numpy_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_15">  15</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_15"></span><span class="anchor" id="line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_16">  16</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_16"></span><span class="anchor" id="line-16-2"></span><span class="Comment"># ezrange extension module</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_17">  17</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_17"></span><span class="anchor" id="line-17-1"></span><span class="ID">_ezrange</span> = <span class="ID">Extension</span>(<span class="String">&quot;</span><span class="String">_ezrange</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_18">  18</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_18"></span><span class="anchor" id="line-18-1"></span>                   [<span class="String">&quot;</span><span class="String">ezrange.i</span><span class="String">&quot;</span>,<span class="String">&quot;</span><span class="String">ezrange.c</span><span class="String">&quot;</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_19">  19</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_19"></span><span class="anchor" id="line-19-1"></span>                   <span class="ID">include_dirs</span> = [<span class="ID">numpy_include</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_20">  20</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_20"></span><span class="anchor" id="line-20-1"></span>                   )</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_21">  21</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_21"></span><span class="anchor" id="line-21-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_22">  22</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_22"></span><span class="anchor" id="line-22-1"></span><span class="Comment"># ezrange setup</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_23">  23</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_23"></span><span class="anchor" id="line-23-1"></span><span class="ID">setup</span>(  <span class="ID">name</span>        = <span class="String">&quot;</span><span class="String">range function</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_24">  24</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_24"></span><span class="anchor" id="line-24-1"></span>        <span class="ID">description</span> = <span class="String">&quot;</span><span class="String">range takes an integer and returns an n element int array where each element is equal to its index</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_25">  25</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_25"></span><span class="anchor" id="line-25-1"></span>        <span class="ID">author</span>      = <span class="String">&quot;</span><span class="String">Egor Zindy</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_26">  26</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_26"></span><span class="anchor" id="line-26-1"></span>        <span class="ID">version</span>     = <span class="String">&quot;</span><span class="String">1.0</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_27">  27</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_27"></span><span class="anchor" id="line-27-1"></span>        <span class="ID">ext_modules</span> = [<span class="ID">_ezrange</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_28">  28</a> </span><span class="LineAnchor" id="CA-ccd5850b69475ebad3613fbd5efabb0cf1351b26_28"></span><span class="anchor" id="line-28-1"></span>        )</span>
</pre></div></div><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><p class="line867">
<h2 id="Compiling_the_module">Compiling the module</h2>
<span class="anchor" id="line-142"></span><p class="line874">The setup command-line is: <span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span><pre><span class="anchor" id="line-1-14"></span>python setup.py build</pre><span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><p class="line874">or <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><p class="line867"><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><pre><span class="anchor" id="line-1-15"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line874">depending on your environment. <span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><p class="line867">
<h2 id="Testing_the_module">Testing the module</h2>
<span class="anchor" id="line-156"></span><p class="line862">If everything goes according to plan, there should be a <tt class="backtick">_ezrange.pyd</tt> file available in the <tt class="backtick">build\lib.XXX</tt> directory. You will need to copy the file in the directory where the <tt class="backtick">ezrange.py</tt> file is (generated by swig), in which case, the following will work (in python): <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line867"><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><pre><span class="anchor" id="line-1-16"></span>&gt;&gt;&gt; import ezrange
<span class="anchor" id="line-2-4"></span>&gt;&gt;&gt; ezrange.range(10)
<span class="anchor" id="line-3-4"></span>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</pre><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><p class="line867">
<h1 id="A_simple_INPLACE_ARRAY1_example">A simple INPLACE_ARRAY1 example</h1>
<span class="anchor" id="line-165"></span><p class="line874">This example doubles the elements of the 1-D array passed to it. The operation is done in-place, which means that the array passed to the function is changed. <span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><p class="line867">
<h2 id="The_C_source_.28inplace.c_and_inplace.h.29">The C source (inplace.c and inplace.h)</h2>
<span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/inplace.h">inplace.h</a> file: <span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-1-17"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c48d07f556541a605264663733c605e5715a0ae1\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-c48d07f556541a605264663733c605e5715a0ae1" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-c48d07f556541a605264663733c605e5715a0ae1_1">   1</a> </span><span class="LineAnchor" id="CA-c48d07f556541a605264663733c605e5715a0ae1_1"></span><span class="anchor" id="line-1-18"></span><span class="ResWord">void</span> <span class="ID">inplace</span>(<span class="ResWord">double</span> *<span class="ID">invec</span>, <span class="ResWord">int</span> <span class="ID">n</span>);</span>
</pre></div></div><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/inplace.c">inplace.c</a> file: <span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-1-19"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-63c49f40c112b7d56d74a39d7cc19354ae222e00\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_1">   1</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_1"></span><span class="anchor" id="line-1-20"></span><span class="ResWord">void</span> <span class="ID">inplace</span>(<span class="ResWord">double</span> *<span class="ID">invec</span>, <span class="ResWord">int</span> <span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_2">   2</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_2"></span><span class="anchor" id="line-2-5"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_3">   3</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_3"></span><span class="anchor" id="line-3-5"></span>    <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_4">   4</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_4"></span><span class="anchor" id="line-4-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_5">   5</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_5"></span><span class="anchor" id="line-5-4"></span>    <span class="ResWord">for</span> (<span class="ID">i</span>=<span class="Number">0</span>; <span class="ID">i</span>&lt;<span class="ID">n</span>; <span class="ID">i</span>++)</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_6">   6</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_6"></span><span class="anchor" id="line-6-4"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_7">   7</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_7"></span><span class="anchor" id="line-7-4"></span>        <span class="ID">invec</span>[<span class="ID">i</span>] = <span class="Number">2</span>*<span class="ID">invec</span>[<span class="ID">i</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_8">   8</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_8"></span><span class="anchor" id="line-8-3"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_9">   9</a> </span><span class="LineAnchor" id="CA-63c49f40c112b7d56d74a39d7cc19354ae222e00_9"></span><span class="anchor" id="line-9-3"></span>}</span>
</pre></div></div><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><p class="line867">
<h2 id="The_interface_file_.28inplace.i.29">The interface file (inplace.i)</h2>
<span class="anchor" id="line-188"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/inplace.i">inplace.i</a> interface file: <span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-1-21"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2d68ce73d80a6a870f479bb14852ac9267654174\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_1">   1</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_1"></span><span class="anchor" id="line-1-22"></span>%<span class="ID">module</span> <span class="ID">inplace</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_2">   2</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_2"></span><span class="anchor" id="line-2-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_3">   3</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_3"></span><span class="anchor" id="line-3-6"></span>%{</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_4">   4</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_4"></span><span class="anchor" id="line-4-5"></span>    <span class="Preprc">#</span><span class="Preprc">define SWIG_FILE_WITH_INIT</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_5">   5</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_5"></span><span class="anchor" id="line-5-5"></span><span class="Preprc"></span>    <span class="Preprc">#</span><span class="Preprc">include &quot;inplace.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_6">   6</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_6"></span><span class="anchor" id="line-6-5"></span><span class="Preprc"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_7">   7</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_7"></span><span class="anchor" id="line-7-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_8">   8</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_8"></span><span class="anchor" id="line-8-4"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">numpy.i</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_9">   9</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_9"></span><span class="anchor" id="line-9-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_10">  10</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_10"></span><span class="anchor" id="line-10-3"></span>%<span class="ID">init</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_11">  11</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_11"></span><span class="anchor" id="line-11-3"></span>    <span class="ID">import_array</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_12">  12</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_12"></span><span class="anchor" id="line-12-3"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_13">  13</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_13"></span><span class="anchor" id="line-13-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_14">  14</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_14"></span><span class="anchor" id="line-14-3"></span>%<span class="ID">apply</span> (<span class="ResWord">double</span>* <span class="ID">INPLACE_ARRAY1</span>, <span class="ResWord">int</span> <span class="ID">DIM1</span>) {(<span class="ResWord">double</span>* <span class="ID">invec</span>, <span class="ResWord">int</span> <span class="ID">n</span>)}</span>
<span class="line"><span class="LineNumber"><a href="#CA-2d68ce73d80a6a870f479bb14852ac9267654174_15">  15</a> </span><span class="LineAnchor" id="CA-2d68ce73d80a6a870f479bb14852ac9267654174_15"></span><span class="anchor" id="line-15-3"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">inplace.h</span><span class="String">&quot;</span></span>
</pre></div></div><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><p class="line867">
<h2 id="Setup_file_.28setup.py.29-1">Setup file (setup.py)</h2>
<span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><p class="line862">This is my <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/setup_inplace.py">setup.py</a> file: <span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-1-23"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-fc999c9490e1736b0f526d0e0096dd5082364d1c\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_1">   1</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_1"></span><span class="anchor" id="line-1-24"></span><span class="Comment">#! /usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_2">   2</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_2"></span><span class="anchor" id="line-2-7"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_3">   3</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_3"></span><span class="anchor" id="line-3-7"></span><span class="Comment"># System imports</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_4">   4</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_4"></span><span class="anchor" id="line-4-6"></span><span class="ResWord">from</span> <span class="ID">distutils.core</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_5">   5</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_5"></span><span class="anchor" id="line-5-6"></span><span class="ResWord">from</span> <span class="ID">distutils</span>      <span class="ResWord">import</span> <span class="ID">sysconfig</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_6">   6</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_6"></span><span class="anchor" id="line-6-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_7">   7</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_7"></span><span class="anchor" id="line-7-6"></span><span class="Comment"># Third-party modules - we depend on numpy for everything</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_8">   8</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_8"></span><span class="anchor" id="line-8-5"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_9">   9</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_9"></span><span class="anchor" id="line-9-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_10">  10</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_10"></span><span class="anchor" id="line-10-4"></span><span class="Comment"># Obtain the numpy include directory.  This logic works across numpy versions.</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_11">  11</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_11"></span><span class="anchor" id="line-11-4"></span><span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_12">  12</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_12"></span><span class="anchor" id="line-12-4"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_13">  13</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_13"></span><span class="anchor" id="line-13-4"></span><span class="ResWord">except</span> <span class="ID">AttributeError</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_14">  14</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_14"></span><span class="anchor" id="line-14-4"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_numpy_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_15">  15</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_15"></span><span class="anchor" id="line-15-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_16">  16</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_16"></span><span class="anchor" id="line-16-3"></span><span class="Comment"># inplace extension module</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_17">  17</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_17"></span><span class="anchor" id="line-17-2"></span><span class="ID">_inplace</span> = <span class="ID">Extension</span>(<span class="String">&quot;</span><span class="String">_inplace</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_18">  18</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_18"></span><span class="anchor" id="line-18-2"></span>                   [<span class="String">&quot;</span><span class="String">inplace.i</span><span class="String">&quot;</span>,<span class="String">&quot;</span><span class="String">inplace.c</span><span class="String">&quot;</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_19">  19</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_19"></span><span class="anchor" id="line-19-2"></span>                   <span class="ID">include_dirs</span> = [<span class="ID">numpy_include</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_20">  20</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_20"></span><span class="anchor" id="line-20-2"></span>                   )</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_21">  21</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_21"></span><span class="anchor" id="line-21-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_22">  22</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_22"></span><span class="anchor" id="line-22-2"></span><span class="Comment"># NumyTypemapTests setup</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_23">  23</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_23"></span><span class="anchor" id="line-23-2"></span><span class="ID">setup</span>(  <span class="ID">name</span>        = <span class="String">&quot;</span><span class="String">inplace function</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_24">  24</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_24"></span><span class="anchor" id="line-24-2"></span>        <span class="ID">description</span> = <span class="String">&quot;</span><span class="String">inplace takes a double array and doubles each of its elements in-place.</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_25">  25</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_25"></span><span class="anchor" id="line-25-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_26">  26</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_26"></span><span class="anchor" id="line-26-2"></span>        <span class="ID">author</span>      = <span class="String">&quot;</span><span class="String">Egor Zindy</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_27">  27</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_27"></span><span class="anchor" id="line-27-2"></span>        <span class="ID">version</span>     = <span class="String">&quot;</span><span class="String">1.0</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_28">  28</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_28"></span><span class="anchor" id="line-28-2"></span>        <span class="ID">ext_modules</span> = [<span class="ID">_inplace</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_29">  29</a> </span><span class="LineAnchor" id="CA-fc999c9490e1736b0f526d0e0096dd5082364d1c_29"></span><span class="anchor" id="line-29-1"></span>        )</span>
</pre></div></div><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><p class="line867">
<h2 id="Compiling_the_module-1">Compiling the module</h2>
<span class="anchor" id="line-244"></span><p class="line874">The setup command-line is: <span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><pre><span class="anchor" id="line-1-25"></span>python setup.py build</pre><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><p class="line874">or <span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><p class="line867"><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><pre><span class="anchor" id="line-1-26"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><p class="line874">depending on your environment. <span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><p class="line867">
<h2 id="Testing_the_module-1">Testing the module</h2>
<span class="anchor" id="line-258"></span><p class="line862">If everything goes according to plan, there should be a <tt class="backtick">_inplace.pyd</tt> file available in the <tt class="backtick">build\lib.XXX</tt> directory. You will need to copy the file in the directory where the <tt class="backtick">inplace.py</tt> file is (generated by swig), in which case, the following will work (in python): <span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><p class="line867"><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><pre><span class="anchor" id="line-1-27"></span>&gt;&gt;&gt; import numpy
<span class="anchor" id="line-2-8"></span>&gt;&gt;&gt; import inplace
<span class="anchor" id="line-3-8"></span>&gt;&gt;&gt; a = numpy.array([1,2,3],'d')
<span class="anchor" id="line-4-7"></span>&gt;&gt;&gt; inplace.inplace(a)
<span class="anchor" id="line-5-7"></span>&gt;&gt;&gt; a
<span class="anchor" id="line-6-7"></span>array([2., 4., 6.])</pre><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><p class="line867">
<h1 id="A_simple_ARGOUTVIEW_ARRAY1_example">A simple ARGOUTVIEW_ARRAY1 example</h1>
<span class="anchor" id="line-270"></span><p class="line867">
<h2 id="Big_fat_multiple_warnings">Big fat multiple warnings</h2>
<span class="anchor" id="line-271"></span><p class="line874">Please note, Bill Spotz advises against the use of argout_view arrays, unless absolutely necessary: <span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><ul><li style="list-style-type:none"><p class="line862">Argoutview arrays are for when your C code provides you with a view of its internal data and does not require any memory to be allocated by the user. This can be dangerous. There is almost no way to guarantee that the internal data from the C code will remain in existence for the entire lifetime of the NumPy array that encapsulates it. If the user destroys the object that provides the view of the data before destroying the NumPy array, then using that array my result in bad memory references or segmentation faults. Nevertheless, there are situations, working with large data sets, where you simply have no other choice. <span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span></li></ul><p class="line862">Python does not take care of memory de-allocation, as stated here by Travis Oliphant: <a class="http" href="../../external.html?link=http://blog.enthought.com/?p=62">http://blog.enthought.com/?p=62</a> <span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><ul><li style="list-style-type:none"><p class="line862">The tricky part, however, is memory management. How does the memory get deallocated? The suggestions have always been something similar to make sure the memory doesnt get deallocated before the NumPy array disappears. This is nice advice, but not generally helpful as it basically just tells you to create a memory leak. <span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span></li></ul><p class="line862">Memory deallocation is also difficult to handle automatically as there is no easy way to do module &quot;finalization&quot;. There is a <tt class="backtick">Py_InitModule()</tt> function, but nothing to handle deletion/destruction/finalization (this will be addressed in Python 3000 as stated in <a class="http" href="../../external.html?link=http://www.python.org/dev/peps/pep-3121/">PEP3121</a>. In my example, I use the python <a class="http" href="../../external.html?link=http://www.python.org/doc/2.5.2/lib/module-atexit.html">module atexit</a> but there must be a better way. <span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><p class="line874">Having said all that, if you have no other choice, here is an example that uses ARGOUTVIEW_ARRAY1. As usual, comments welcome! <span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><p class="line874">The module declares a block of memory and a couple of functions: <span class="anchor" id="line-284"></span><ul><li>ezview.set_ones() sets all the elements (doubles) in the memory block to one and returns a numpy array that is a VIEW of the memory block. <span class="anchor" id="line-285"></span></li><li>ezview.get_view() simply returns a view of the memory block. <span class="anchor" id="line-286"></span></li><li>ezview.finalize() takes care of the memory deallocation (this is the weak part of this example). <span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span></li></ul><p class="line867">
<h2 id="The_C_source_.28ezview.c_and_ezview.h.29">The C source (ezview.c and ezview.h)</h2>
<span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezview.h">ezview.h</a> file: <span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-1-28"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-417851fde62eb25a1a65df69a123c00849aa9682\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-417851fde62eb25a1a65df69a123c00849aa9682" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-417851fde62eb25a1a65df69a123c00849aa9682_1">   1</a> </span><span class="LineAnchor" id="CA-417851fde62eb25a1a65df69a123c00849aa9682_1"></span><span class="anchor" id="line-1-29"></span><span class="ResWord">void</span> <span class="ID">set_ones</span>(<span class="ResWord">double</span> *<span class="ID">array</span>, <span class="ResWord">int</span> <span class="ID">n</span>);</span>
</pre></div></div><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezview.c">ezview.c</a> file: <span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><span class="anchor" id="line-1-30"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d99dfb2bb117400b10d880489777206e8e91d426\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-d99dfb2bb117400b10d880489777206e8e91d426" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_1">   1</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_1"></span><span class="anchor" id="line-1-31"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_2">   2</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_2"></span><span class="anchor" id="line-2-9"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt; </span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_3">   3</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_3"></span><span class="anchor" id="line-3-9"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_4">   4</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_4"></span><span class="anchor" id="line-4-8"></span><span class="Preprc">#</span><span class="Preprc">include &quot;ezview.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_5">   5</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_5"></span><span class="anchor" id="line-5-8"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_6">   6</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_6"></span><span class="anchor" id="line-6-8"></span><span class="ResWord">void</span> <span class="ID">set_ones</span>(<span class="ResWord">double</span> *<span class="ID">array</span>, <span class="ResWord">int</span> <span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_7">   7</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_7"></span><span class="anchor" id="line-7-7"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_8">   8</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_8"></span><span class="anchor" id="line-8-6"></span>    <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_9">   9</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_9"></span><span class="anchor" id="line-9-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_10">  10</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_10"></span><span class="anchor" id="line-10-5"></span>    <span class="ResWord">if</span> (<span class="ID">array</span> == <span class="ResWord">NULL</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_11">  11</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_11"></span><span class="anchor" id="line-11-5"></span>        <span class="ResWord">return</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_12">  12</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_12"></span><span class="anchor" id="line-12-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_13">  13</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_13"></span><span class="anchor" id="line-13-5"></span>    <span class="ResWord">for</span> (<span class="ID">i</span>=<span class="Number">0</span>;<span class="ID">i</span>&lt;<span class="ID">n</span>;<span class="ID">i</span>++)</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_14">  14</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_14"></span><span class="anchor" id="line-14-5"></span>        <span class="ID">array</span>[<span class="ID">i</span>] = <span class="Number">1.</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-d99dfb2bb117400b10d880489777206e8e91d426_15">  15</a> </span><span class="LineAnchor" id="CA-d99dfb2bb117400b10d880489777206e8e91d426_15"></span><span class="anchor" id="line-15-5"></span>}</span>
</pre></div></div><span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><p class="line867">
<h2 id="The_interface_file_.28ezview.i.29">The interface file (ezview.i)</h2>
<span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezview.i">ezview.i</a> interface file: <span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-1-32"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4f345f55914637dfb39cf15443af2d25bc7e42df\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_1">   1</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_1"></span><span class="anchor" id="line-1-33"></span>%<span class="ID">module</span> <span class="ID">ezview</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_2">   2</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_2"></span><span class="anchor" id="line-2-10"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_3">   3</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_3"></span><span class="anchor" id="line-3-10"></span>%{</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_4">   4</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_4"></span><span class="anchor" id="line-4-9"></span>    <span class="Preprc">#</span><span class="Preprc">define SWIG_FILE_WITH_INIT</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_5">   5</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_5"></span><span class="anchor" id="line-5-9"></span><span class="Preprc"></span>    <span class="Preprc">#</span><span class="Preprc">include &quot;ezview.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_6">   6</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_6"></span><span class="anchor" id="line-6-9"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_7">   7</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_7"></span><span class="anchor" id="line-7-8"></span>    <span class="ResWord">double</span> *<span class="ID">my_array</span> = <span class="ResWord">NULL</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_8">   8</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_8"></span><span class="anchor" id="line-8-7"></span>    <span class="ResWord">int</span> <span class="ID">my_n</span> = <span class="Number">10</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_9">   9</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_9"></span><span class="anchor" id="line-9-7"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_10">  10</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_10"></span><span class="anchor" id="line-10-6"></span>    <span class="ResWord">void</span> <span class="ID">__call_at_begining</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_11">  11</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_11"></span><span class="anchor" id="line-11-6"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_12">  12</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_12"></span><span class="anchor" id="line-12-6"></span>        <span class="ID">printf</span>(<span class="String">&quot;</span><span class="String">__call_at_begining...</span><span class="SPChar">\n</span><span class="String">&quot;</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_13">  13</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_13"></span><span class="anchor" id="line-13-6"></span>        <span class="ID">my_array</span> = (<span class="ResWord">double</span> *)<span class="ID">malloc</span>(<span class="ID">my_n</span>*<span class="ResWord">sizeof</span>(<span class="ResWord">double</span>));</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_14">  14</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_14"></span><span class="anchor" id="line-14-6"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_15">  15</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_15"></span><span class="anchor" id="line-15-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_16">  16</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_16"></span><span class="anchor" id="line-16-4"></span>    <span class="ResWord">void</span> <span class="ID">__call_at_end</span>(<span class="ResWord">void</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_17">  17</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_17"></span><span class="anchor" id="line-17-3"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_18">  18</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_18"></span><span class="anchor" id="line-18-3"></span>        <span class="ID">printf</span>(<span class="String">&quot;</span><span class="String">__call_at_end...</span><span class="SPChar">\n</span><span class="String">&quot;</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_19">  19</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_19"></span><span class="anchor" id="line-19-3"></span>        <span class="ResWord">if</span> (<span class="ID">my_array</span> != <span class="ResWord">NULL</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_20">  20</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_20"></span><span class="anchor" id="line-20-3"></span>            <span class="ID">free</span>(<span class="ID">my_array</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_21">  21</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_21"></span><span class="anchor" id="line-21-3"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_22">  22</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_22"></span><span class="anchor" id="line-22-3"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_23">  23</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_23"></span><span class="anchor" id="line-23-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_24">  24</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_24"></span><span class="anchor" id="line-24-3"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">numpy.i</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_25">  25</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_25"></span><span class="anchor" id="line-25-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_26">  26</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_26"></span><span class="anchor" id="line-26-3"></span>%<span class="ID">init</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_27">  27</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_27"></span><span class="anchor" id="line-27-3"></span>    <span class="ID">import_array</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_28">  28</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_28"></span><span class="anchor" id="line-28-3"></span>    <span class="ID">__call_at_begining</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_29">  29</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_29"></span><span class="anchor" id="line-29-2"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_30">  30</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_30"></span><span class="anchor" id="line-30-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_31">  31</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_31"></span><span class="anchor" id="line-31-1"></span>%<span class="ID">apply</span> (<span class="ResWord">double</span>** <span class="ID">ARGOUTVIEW_ARRAY1</span>, <span class="ResWord">int</span> *<span class="ID">DIM1</span>) {(<span class="ResWord">double</span>** <span class="ID">vec</span>, <span class="ResWord">int</span>* <span class="ID">n</span>)}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_32">  32</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_32"></span><span class="anchor" id="line-32-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_33">  33</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_33"></span><span class="anchor" id="line-33-1"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">ezview.h</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_34">  34</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_34"></span><span class="anchor" id="line-34-1"></span>%<span class="ID">rename</span> (<span class="ID">set_ones</span>) <span class="ID">my_set_ones</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_35">  35</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_35"></span><span class="anchor" id="line-35-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_36">  36</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_36"></span><span class="anchor" id="line-36-1"></span>%<span class="ResWord">inline</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_37">  37</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_37"></span><span class="anchor" id="line-37-1"></span><span class="ResWord">void</span> <span class="ID">finalize</span>(<span class="ResWord">void</span>){</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_38">  38</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_38"></span><span class="anchor" id="line-38-1"></span>    <span class="ID">__call_at_end</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_39">  39</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_39"></span><span class="anchor" id="line-39-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_40">  40</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_40"></span><span class="anchor" id="line-40-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_41">  41</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_41"></span><span class="anchor" id="line-41-1"></span><span class="ResWord">void</span> <span class="ID">get_view</span>(<span class="ResWord">double</span> **<span class="ID">vec</span>, <span class="ResWord">int</span>* <span class="ID">n</span>) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_42">  42</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_42"></span><span class="anchor" id="line-42-1"></span>    *<span class="ID">vec</span> = <span class="ID">my_array</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_43">  43</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_43"></span><span class="anchor" id="line-43-1"></span>    *<span class="ID">n</span> = <span class="ID">my_n</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_44">  44</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_44"></span><span class="anchor" id="line-44-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_45">  45</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_45"></span><span class="anchor" id="line-45-1"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_46">  46</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_46"></span><span class="anchor" id="line-46-1"></span><span class="ResWord">void</span> <span class="ID">my_set_ones</span>(<span class="ResWord">double</span> **<span class="ID">vec</span>, <span class="ResWord">int</span>* <span class="ID">n</span>) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_47">  47</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_47"></span><span class="anchor" id="line-47-1"></span>    <span class="ID">set_ones</span>(<span class="ID">my_array</span>,<span class="ID">my_n</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_48">  48</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_48"></span><span class="anchor" id="line-48-1"></span>    *<span class="ID">vec</span> = <span class="ID">my_array</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_49">  49</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_49"></span><span class="anchor" id="line-49-1"></span>    *<span class="ID">n</span> = <span class="ID">my_n</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_50">  50</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_50"></span><span class="anchor" id="line-50-1"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-4f345f55914637dfb39cf15443af2d25bc7e42df_51">  51</a> </span><span class="LineAnchor" id="CA-4f345f55914637dfb39cf15443af2d25bc7e42df_51"></span><span class="anchor" id="line-51-1"></span>%}</span>
</pre></div></div><span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span><p class="line874">Don't forget that you will also need the numpy.i file in the same directory. <span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span><p class="line867">
<h2 id="Setup_file_.28setup.py.29-2">Setup file (setup.py)</h2>
<span class="anchor" id="line-374"></span><span class="anchor" id="line-375"></span><p class="line862">This is my <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/setup_ezview.py">setup.py</a> file: <span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span><span class="anchor" id="line-405"></span><span class="anchor" id="line-1-34"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-633cae2c5dc13c044828fe9da216f847502ebe5a\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_1">   1</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_1"></span><span class="anchor" id="line-1-35"></span><span class="Comment">#! /usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_2">   2</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_2"></span><span class="anchor" id="line-2-11"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_3">   3</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_3"></span><span class="anchor" id="line-3-11"></span><span class="Comment"># System imports</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_4">   4</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_4"></span><span class="anchor" id="line-4-10"></span><span class="ResWord">from</span> <span class="ID">distutils.core</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_5">   5</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_5"></span><span class="anchor" id="line-5-10"></span><span class="ResWord">from</span> <span class="ID">distutils</span>      <span class="ResWord">import</span> <span class="ID">sysconfig</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_6">   6</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_6"></span><span class="anchor" id="line-6-10"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_7">   7</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_7"></span><span class="anchor" id="line-7-9"></span><span class="Comment"># Third-party modules - we depend on numpy for everything</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_8">   8</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_8"></span><span class="anchor" id="line-8-8"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_9">   9</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_9"></span><span class="anchor" id="line-9-8"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_10">  10</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_10"></span><span class="anchor" id="line-10-7"></span><span class="Comment"># Obtain the numpy include directory.  This logic works across numpy versions.</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_11">  11</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_11"></span><span class="anchor" id="line-11-7"></span><span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_12">  12</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_12"></span><span class="anchor" id="line-12-7"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_13">  13</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_13"></span><span class="anchor" id="line-13-7"></span><span class="ResWord">except</span> <span class="ID">AttributeError</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_14">  14</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_14"></span><span class="anchor" id="line-14-7"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_numpy_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_15">  15</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_15"></span><span class="anchor" id="line-15-7"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_16">  16</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_16"></span><span class="anchor" id="line-16-5"></span><span class="Comment"># view extension module</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_17">  17</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_17"></span><span class="anchor" id="line-17-4"></span><span class="ID">_ezview</span> = <span class="ID">Extension</span>(<span class="String">&quot;</span><span class="String">_ezview</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_18">  18</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_18"></span><span class="anchor" id="line-18-4"></span>                   [<span class="String">&quot;</span><span class="String">ezview.i</span><span class="String">&quot;</span>,<span class="String">&quot;</span><span class="String">ezview.c</span><span class="String">&quot;</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_19">  19</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_19"></span><span class="anchor" id="line-19-4"></span>                   <span class="ID">include_dirs</span> = [<span class="ID">numpy_include</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_20">  20</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_20"></span><span class="anchor" id="line-20-4"></span>                   )</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_21">  21</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_21"></span><span class="anchor" id="line-21-4"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_22">  22</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_22"></span><span class="anchor" id="line-22-4"></span><span class="Comment"># NumyTypemapTests setup</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_23">  23</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_23"></span><span class="anchor" id="line-23-4"></span><span class="ID">setup</span>(  <span class="ID">name</span>        = <span class="String">&quot;</span><span class="String">ezview module</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_24">  24</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_24"></span><span class="anchor" id="line-24-4"></span>        <span class="ID">description</span> = <span class="String">&quot;</span><span class="String">ezview provides 3 functions: set_ones(), get_view() and finalize(). set_ones() and get_view() provide a view on a memory block allocated in C, finalize() takes care of the memory deallocation.</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_25">  25</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_25"></span><span class="anchor" id="line-25-4"></span>        <span class="ID">author</span>      = <span class="String">&quot;</span><span class="String">Egor Zindy</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_26">  26</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_26"></span><span class="anchor" id="line-26-4"></span>        <span class="ID">version</span>     = <span class="String">&quot;</span><span class="String">1.0</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_27">  27</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_27"></span><span class="anchor" id="line-27-4"></span>        <span class="ID">ext_modules</span> = [<span class="ID">_ezview</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-633cae2c5dc13c044828fe9da216f847502ebe5a_28">  28</a> </span><span class="LineAnchor" id="CA-633cae2c5dc13c044828fe9da216f847502ebe5a_28"></span><span class="anchor" id="line-28-4"></span>        )</span>
</pre></div></div><span class="anchor" id="line-406"></span><span class="anchor" id="line-407"></span><p class="line867">
<h2 id="Compiling_the_module-2">Compiling the module</h2>
<span class="anchor" id="line-408"></span><p class="line874">The setup command-line is: <span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span><pre><span class="anchor" id="line-1-36"></span>python setup.py build</pre><span class="anchor" id="line-412"></span><span class="anchor" id="line-413"></span><p class="line874">or <span class="anchor" id="line-414"></span><span class="anchor" id="line-415"></span><p class="line867"><span class="anchor" id="line-416"></span><span class="anchor" id="line-417"></span><pre><span class="anchor" id="line-1-37"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span><p class="line874">depending on your environment. <span class="anchor" id="line-420"></span><span class="anchor" id="line-421"></span><p class="line867">
<h2 id="Testing_the_module-2">Testing the module</h2>
<span class="anchor" id="line-422"></span><p class="line862">If everything goes according to plan, there should be a <tt class="backtick">_ezview.pyd</tt> file available in the <tt class="backtick">build\lib.XXX</tt> directory. You will need to copy the file in the directory where the <tt class="backtick">ezview.py</tt> file is (generated by swig), in which case, the following will work (in python): <span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><p class="line862">The test code <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/test_ezview.py">test_ezview.py</a> follows: <span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span><p class="line867"><span class="anchor" id="line-427"></span><span class="anchor" id="line-428"></span><span class="anchor" id="line-429"></span><span class="anchor" id="line-430"></span><span class="anchor" id="line-431"></span><span class="anchor" id="line-432"></span><span class="anchor" id="line-433"></span><span class="anchor" id="line-434"></span><span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span><span class="anchor" id="line-437"></span><span class="anchor" id="line-438"></span><span class="anchor" id="line-439"></span><span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span><span class="anchor" id="line-442"></span><span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span><span class="anchor" id="line-447"></span><span class="anchor" id="line-448"></span><span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span><span class="anchor" id="line-451"></span><span class="anchor" id="line-1-38"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-297885436b0ab84d59918bc0e6cdfe9b7be83014\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_1">   1</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_1"></span><span class="anchor" id="line-1-39"></span><span class="ResWord">import</span> <span class="ID">atexit</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_2">   2</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_2"></span><span class="anchor" id="line-2-12"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_3">   3</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_3"></span><span class="anchor" id="line-3-12"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="String">first message is from __call_at_begining()</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_4">   4</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_4"></span><span class="anchor" id="line-4-11"></span><span class="ResWord">import</span> <span class="ID">ezview</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_5">   5</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_5"></span><span class="anchor" id="line-5-11"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_6">   6</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_6"></span><span class="anchor" id="line-6-11"></span><span class="Comment">#There is no easy way to finalize the module (see PEP3121)</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_7">   7</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_7"></span><span class="anchor" id="line-7-10"></span><span class="ID">atexit</span>.<span class="ID">register</span>(<span class="ID">ezview</span>.<span class="ID">finalize</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_8">   8</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_8"></span><span class="anchor" id="line-8-9"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_9">   9</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_9"></span><span class="anchor" id="line-9-9"></span><span class="ID">a</span> = <span class="ID">ezview</span>.<span class="ID">set_ones</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_10">  10</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_10"></span><span class="anchor" id="line-10-8"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">calling ezview.set_ones() - now the memory block is all ones.</span><span class="SPChar">\n</span><span class="String">Returned array (a view on the allocated memory block) is:</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_11">  11</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_11"></span><span class="anchor" id="line-11-8"></span><span class="ResWord">print</span> <span class="ID">a</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_12">  12</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_12"></span><span class="anchor" id="line-12-8"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_13">  13</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_13"></span><span class="anchor" id="line-13-8"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">we</span><span class="String">'</span><span class="String">re setting the array using a[:]=arange(a.shape[0])</span><span class="SPChar">\n</span><span class="String">This changes the content of the allocated memory block:</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_14">  14</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_14"></span><span class="anchor" id="line-14-8"></span><span class="ID">a</span>[:] = <span class="ID">numpy</span>.<span class="ID">arange</span>(<span class="ID">a</span>.<span class="ID">shape</span>[<span class="Number">0</span>])</span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_15">  15</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_15"></span><span class="anchor" id="line-15-8"></span><span class="ResWord">print</span> <span class="ID">a</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_16">  16</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_16"></span><span class="anchor" id="line-16-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_17">  17</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_17"></span><span class="anchor" id="line-17-5"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">we</span><span class="String">'</span><span class="String">re now deleting the array  - this only deletes the view,</span><span class="SPChar">\n</span><span class="String">not the allocated memory!</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_18">  18</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_18"></span><span class="anchor" id="line-18-5"></span><span class="ResWord">del</span> <span class="ID">a</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_19">  19</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_19"></span><span class="anchor" id="line-19-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_20">  20</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_20"></span><span class="anchor" id="line-20-5"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">let</span><span class="String">'</span><span class="String">s get a new view on the allocated memory, should STILL contain [0,1,2,3...]</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_21">  21</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_21"></span><span class="anchor" id="line-21-5"></span><span class="ID">b</span> = <span class="ID">ezview</span>.<span class="ID">get_view</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_22">  22</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_22"></span><span class="anchor" id="line-22-5"></span><span class="ResWord">print</span> <span class="ID">b</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_23">  23</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_23"></span><span class="anchor" id="line-23-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_24">  24</a> </span><span class="LineAnchor" id="CA-297885436b0ab84d59918bc0e6cdfe9b7be83014_24"></span><span class="anchor" id="line-24-5"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">next message from __call_at_end() - finalize() registered via module atexit</span><span class="String">&quot;</span></span>
</pre></div></div><span class="anchor" id="line-452"></span><p class="line874">Launch test_ezview.py and the following will hopefully happen: <span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span><span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span><span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span><span class="anchor" id="line-465"></span><span class="anchor" id="line-466"></span><span class="anchor" id="line-467"></span><span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><pre><span class="anchor" id="line-1-40"></span>~&gt; python test_ezview.py
<span class="anchor" id="line-2-13"></span>first message is from __call_at_begining()
<span class="anchor" id="line-3-13"></span>__call_at_begining...
<span class="anchor" id="line-4-12"></span>
<span class="anchor" id="line-5-12"></span>calling ezview.set_ones() - now the memory block is all ones.
<span class="anchor" id="line-6-12"></span>Returned array (a view on the allocated memory block) is:
<span class="anchor" id="line-7-11"></span>[ 1.  1.  1.  1.  1.  1.  1.  1.  1.  1.]
<span class="anchor" id="line-8-10"></span>
<span class="anchor" id="line-9-10"></span>we re setting the array using a[:]=arange(a.shape[0])
<span class="anchor" id="line-10-9"></span>This changes the content of the allocated memory block:
<span class="anchor" id="line-11-9"></span>[ 0.  1.  2.  3.  4.  5.  6.  7.  8.  9.]
<span class="anchor" id="line-12-9"></span>
<span class="anchor" id="line-13-9"></span>we re now deleting the array  - this only deletes the view,
<span class="anchor" id="line-14-9"></span>not the allocated memory!
<span class="anchor" id="line-15-9"></span>
<span class="anchor" id="line-16-7"></span>let s get a new view on the allocated memory, should STILL contain [0,1,2,3...]
<span class="anchor" id="line-17-6"></span>[ 0.  1.  2.  3.  4.  5.  6.  7.  8.  9.]
<span class="anchor" id="line-18-6"></span>
<span class="anchor" id="line-19-6"></span>next message from __call_at_end() - finalize() registered via module atexit
<span class="anchor" id="line-20-6"></span>__call_at_end...</pre><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><p class="line867">
<h1 id="Error_handling_using_errno_and_python_exceptions">Error handling using errno and python exceptions</h1>
<span class="anchor" id="line-477"></span><p class="line874">I have been testing this for a few months now and this is the best I've come-up with. If anyone knows of a better way, please let me know. <span class="anchor" id="line-478"></span><span class="anchor" id="line-479"></span><p class="line874">From the opengroup website, the lvalue errno is used by many functions to return error values. <span class="anchor" id="line-480"></span>The idea is that the global variable errno is set to 0 before a function is called (in swig parlance: $action), and checked afterwards. If errno is non-zero, a python exception with a meaningful message is generated, depending on the value of errno. <span class="anchor" id="line-481"></span><span class="anchor" id="line-482"></span><p class="line874">The following example comprises two examples: First example uses errno when checking whether an array index is valid. Second example uses errno to notify the user of a malloc() problem. <span class="anchor" id="line-483"></span><span class="anchor" id="line-484"></span><p class="line867">
<h2 id="The_C_source_.28ezerr.c_and_ezerr.h.29">The C source (ezerr.c and ezerr.h)</h2>
<span class="anchor" id="line-485"></span><span class="anchor" id="line-486"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezerr.h">ezerr.h</a> file: <span class="anchor" id="line-487"></span><span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span><span class="anchor" id="line-1-41"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9751bbca8662150da744985afab2a1e07cc349ea\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-9751bbca8662150da744985afab2a1e07cc349ea" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-9751bbca8662150da744985afab2a1e07cc349ea_1">   1</a> </span><span class="LineAnchor" id="CA-9751bbca8662150da744985afab2a1e07cc349ea_1"></span><span class="anchor" id="line-1-42"></span><span class="ResWord">int</span> <span class="ID">val</span>(<span class="ResWord">int</span> *<span class="ID">array</span>, <span class="ResWord">int</span> <span class="ID">n</span>, <span class="ResWord">int</span> <span class="ID">index</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-9751bbca8662150da744985afab2a1e07cc349ea_2">   2</a> </span><span class="LineAnchor" id="CA-9751bbca8662150da744985afab2a1e07cc349ea_2"></span><span class="anchor" id="line-2-14"></span><span class="ResWord">void</span> <span class="ID">alloc</span>(<span class="ResWord">int</span> <span class="ID">n</span>);</span>
</pre></div></div><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezerr.c">ezerr.c</a> file: <span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span><span class="anchor" id="line-497"></span><span class="anchor" id="line-498"></span><span class="anchor" id="line-499"></span><span class="anchor" id="line-500"></span><span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span><span class="anchor" id="line-503"></span><span class="anchor" id="line-504"></span><span class="anchor" id="line-505"></span><span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span><span class="anchor" id="line-508"></span><span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span><span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><span class="anchor" id="line-513"></span><span class="anchor" id="line-514"></span><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span><span class="anchor" id="line-525"></span><span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span><span class="anchor" id="line-529"></span><span class="anchor" id="line-530"></span><span class="anchor" id="line-531"></span><span class="anchor" id="line-532"></span><span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span><span class="anchor" id="line-1-43"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-f43934873b90c1276927a23788990d0c0fd094c3\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-f43934873b90c1276927a23788990d0c0fd094c3" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_1">   1</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_1"></span><span class="anchor" id="line-1-44"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdlib.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_2">   2</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_2"></span><span class="anchor" id="line-2-15"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &lt;errno.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_3">   3</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_3"></span><span class="anchor" id="line-3-14"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_4">   4</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_4"></span><span class="anchor" id="line-4-13"></span><span class="Preprc">#</span><span class="Preprc">include &quot;ezerr.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_5">   5</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_5"></span><span class="anchor" id="line-5-13"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_6">   6</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_6"></span><span class="anchor" id="line-6-13"></span><span class="Comment">//return the array element defined by index</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_7">   7</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_7"></span><span class="anchor" id="line-7-12"></span><span class="Comment"></span><span class="ResWord">int</span> <span class="ID">val</span>(<span class="ResWord">int</span> *<span class="ID">array</span>, <span class="ResWord">int</span> <span class="ID">n</span>, <span class="ResWord">int</span> <span class="ID">index</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_8">   8</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_8"></span><span class="anchor" id="line-8-11"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_9">   9</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_9"></span><span class="anchor" id="line-9-11"></span>    <span class="ResWord">int</span> <span class="ID">value</span>=<span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_10">  10</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_10"></span><span class="anchor" id="line-10-10"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_11">  11</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_11"></span><span class="anchor" id="line-11-10"></span>    <span class="ResWord">if</span> (<span class="ID">index</span> &lt; <span class="Number">0</span> || <span class="ID">index</span> &gt;=<span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_12">  12</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_12"></span><span class="anchor" id="line-12-10"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_13">  13</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_13"></span><span class="anchor" id="line-13-10"></span>        <span class="ID">errno</span> = <span class="ID">EPERM</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_14">  14</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_14"></span><span class="anchor" id="line-14-10"></span>        <span class="ResWord">goto</span> <span class="ID">end</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_15">  15</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_15"></span><span class="anchor" id="line-15-10"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_16">  16</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_16"></span><span class="anchor" id="line-16-8"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_17">  17</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_17"></span><span class="anchor" id="line-17-7"></span>    <span class="ID">value</span> = <span class="ID">array</span>[<span class="ID">index</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_18">  18</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_18"></span><span class="anchor" id="line-18-7"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_19">  19</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_19"></span><span class="anchor" id="line-19-7"></span><span class="ID">end</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_20">  20</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_20"></span><span class="anchor" id="line-20-7"></span>    <span class="ResWord">return</span> <span class="ID">value</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_21">  21</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_21"></span><span class="anchor" id="line-21-6"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_22">  22</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_22"></span><span class="anchor" id="line-22-6"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_23">  23</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_23"></span><span class="anchor" id="line-23-6"></span><span class="Comment">//allocate (and free) a char array of size n</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_24">  24</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_24"></span><span class="anchor" id="line-24-6"></span><span class="Comment"></span><span class="ResWord">void</span> <span class="ID">alloc</span>(<span class="ResWord">int</span> <span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_25">  25</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_25"></span><span class="anchor" id="line-25-5"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_26">  26</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_26"></span><span class="anchor" id="line-26-5"></span>    <span class="ResWord">char</span> *<span class="ID">array</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_27">  27</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_27"></span><span class="anchor" id="line-27-5"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_28">  28</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_28"></span><span class="anchor" id="line-28-5"></span>    <span class="ID">array</span> = (<span class="ResWord">char</span> *)<span class="ID">malloc</span>(<span class="ID">n</span>*<span class="ResWord">sizeof</span>(<span class="ResWord">char</span>));</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_29">  29</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_29"></span><span class="anchor" id="line-29-3"></span>    <span class="ResWord">if</span> (<span class="ID">array</span> == <span class="ResWord">NULL</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_30">  30</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_30"></span><span class="anchor" id="line-30-2"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_31">  31</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_31"></span><span class="anchor" id="line-31-2"></span>        <span class="ID">errno</span> = <span class="ID">ENOMEM</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_32">  32</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_32"></span><span class="anchor" id="line-32-2"></span>        <span class="ResWord">goto</span> <span class="ID">end</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_33">  33</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_33"></span><span class="anchor" id="line-33-2"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_34">  34</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_34"></span><span class="anchor" id="line-34-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_35">  35</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_35"></span><span class="anchor" id="line-35-2"></span>    <span class="Comment">//don't keep the memory allocated...</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_36">  36</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_36"></span><span class="anchor" id="line-36-2"></span><span class="Comment"></span>    <span class="ID">free</span>(<span class="ID">array</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_37">  37</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_37"></span><span class="anchor" id="line-37-2"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_38">  38</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_38"></span><span class="anchor" id="line-38-2"></span><span class="ID">end</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_39">  39</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_39"></span><span class="anchor" id="line-39-2"></span>    <span class="ResWord">return</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-f43934873b90c1276927a23788990d0c0fd094c3_40">  40</a> </span><span class="LineAnchor" id="CA-f43934873b90c1276927a23788990d0c0fd094c3_40"></span><span class="anchor" id="line-40-2"></span>}</span>
</pre></div></div><span class="anchor" id="line-535"></span><span class="anchor" id="line-536"></span><p class="line867">
<h2 id="The_interface_file_.28ezerr.i.29">The interface file (ezerr.i)</h2>
<span class="anchor" id="line-537"></span><span class="anchor" id="line-538"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/ezerr.i">ezerr.i</a> interface file: <span class="anchor" id="line-539"></span><span class="anchor" id="line-540"></span><span class="anchor" id="line-541"></span><span class="anchor" id="line-542"></span><span class="anchor" id="line-543"></span><span class="anchor" id="line-544"></span><span class="anchor" id="line-545"></span><span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span><span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span><span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span><span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span><span class="anchor" id="line-556"></span><span class="anchor" id="line-557"></span><span class="anchor" id="line-558"></span><span class="anchor" id="line-559"></span><span class="anchor" id="line-560"></span><span class="anchor" id="line-561"></span><span class="anchor" id="line-562"></span><span class="anchor" id="line-563"></span><span class="anchor" id="line-564"></span><span class="anchor" id="line-565"></span><span class="anchor" id="line-566"></span><span class="anchor" id="line-567"></span><span class="anchor" id="line-568"></span><span class="anchor" id="line-569"></span><span class="anchor" id="line-570"></span><span class="anchor" id="line-571"></span><span class="anchor" id="line-572"></span><span class="anchor" id="line-573"></span><span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span><span class="anchor" id="line-576"></span><span class="anchor" id="line-577"></span><span class="anchor" id="line-578"></span><span class="anchor" id="line-579"></span><span class="anchor" id="line-1-45"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-85e5c32e232ee31f3944d2f5623abee701359cc9\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_1">   1</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_1"></span><span class="anchor" id="line-1-46"></span>%<span class="ID">module</span> <span class="ID">ezerr</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_2">   2</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_2"></span><span class="anchor" id="line-2-16"></span>%{</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_3">   3</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_3"></span><span class="anchor" id="line-3-15"></span><span class="Preprc">#</span><span class="Preprc">include &lt;errno.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_4">   4</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_4"></span><span class="anchor" id="line-4-14"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &quot;ezerr.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_5">   5</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_5"></span><span class="anchor" id="line-5-14"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_6">   6</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_6"></span><span class="anchor" id="line-6-14"></span><span class="Preprc">#</span><span class="Preprc">define SWIG_FILE_WITH_INIT</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_7">   7</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_7"></span><span class="anchor" id="line-7-13"></span><span class="Preprc"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_8">   8</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_8"></span><span class="anchor" id="line-8-12"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_9">   9</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_9"></span><span class="anchor" id="line-9-12"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">numpy.i</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_10">  10</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_10"></span><span class="anchor" id="line-10-11"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_11">  11</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_11"></span><span class="anchor" id="line-11-11"></span>%<span class="ID">init</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_12">  12</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_12"></span><span class="anchor" id="line-12-11"></span>    <span class="ID">import_array</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_13">  13</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_13"></span><span class="anchor" id="line-13-11"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_14">  14</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_14"></span><span class="anchor" id="line-14-11"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_15">  15</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_15"></span><span class="anchor" id="line-15-11"></span>%<span class="ID">exception</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_16">  16</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_16"></span><span class="anchor" id="line-16-9"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_17">  17</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_17"></span><span class="anchor" id="line-17-8"></span>    <span class="ID">errno</span> = <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_18">  18</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_18"></span><span class="anchor" id="line-18-8"></span>    $<span class="ID">action</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_19">  19</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_19"></span><span class="anchor" id="line-19-8"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_20">  20</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_20"></span><span class="anchor" id="line-20-8"></span>    <span class="ResWord">if</span> (<span class="ID">errno</span> != <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_21">  21</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_21"></span><span class="anchor" id="line-21-7"></span>    {</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_22">  22</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_22"></span><span class="anchor" id="line-22-7"></span>        <span class="ResWord">switch</span>(<span class="ID">errno</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_23">  23</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_23"></span><span class="anchor" id="line-23-7"></span>        {</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_24">  24</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_24"></span><span class="anchor" id="line-24-7"></span>            <span class="ResWord">case</span> <span class="ID">EPERM</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_25">  25</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_25"></span><span class="anchor" id="line-25-6"></span>                <span class="ID">PyErr_Format</span>(<span class="ID">PyExc_IndexError</span>, <span class="String">&quot;</span><span class="String">Index out of range</span><span class="String">&quot;</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_26">  26</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_26"></span><span class="anchor" id="line-26-6"></span>                <span class="ResWord">break</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_27">  27</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_27"></span><span class="anchor" id="line-27-6"></span>            <span class="ResWord">case</span> <span class="ID">ENOMEM</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_28">  28</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_28"></span><span class="anchor" id="line-28-6"></span>                <span class="ID">PyErr_Format</span>(<span class="ID">PyExc_MemoryError</span>, <span class="String">&quot;</span><span class="String">Failed malloc()</span><span class="String">&quot;</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_29">  29</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_29"></span><span class="anchor" id="line-29-4"></span>                <span class="ResWord">break</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_30">  30</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_30"></span><span class="anchor" id="line-30-3"></span>            <span class="ResWord">default</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_31">  31</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_31"></span><span class="anchor" id="line-31-3"></span>                <span class="ID">PyErr_Format</span>(<span class="ID">PyExc_Exception</span>, <span class="String">&quot;</span><span class="String">Unknown exception</span><span class="String">&quot;</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_32">  32</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_32"></span><span class="anchor" id="line-32-3"></span>        }</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_33">  33</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_33"></span><span class="anchor" id="line-33-3"></span>        <span class="ID">SWIG_fail</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_34">  34</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_34"></span><span class="anchor" id="line-34-3"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_35">  35</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_35"></span><span class="anchor" id="line-35-3"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_36">  36</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_36"></span><span class="anchor" id="line-36-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_37">  37</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_37"></span><span class="anchor" id="line-37-3"></span>%<span class="ID">apply</span> (<span class="ResWord">int</span>* <span class="ID">IN_ARRAY1</span>, <span class="ResWord">int</span> <span class="ID">DIM1</span>) {(<span class="ResWord">int</span> *<span class="ID">array</span>, <span class="ResWord">int</span> <span class="ID">n</span>)}</span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_38">  38</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_38"></span><span class="anchor" id="line-38-3"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-85e5c32e232ee31f3944d2f5623abee701359cc9_39">  39</a> </span><span class="LineAnchor" id="CA-85e5c32e232ee31f3944d2f5623abee701359cc9_39"></span><span class="anchor" id="line-39-3"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">ezerr.h</span><span class="String">&quot;</span></span>
</pre></div></div><span class="anchor" id="line-580"></span><span class="anchor" id="line-581"></span><p class="line862">Note the <em>SWIG_fail</em>, which is a macro for <em>goto fail</em> in case there is any other cleanup code to execute (thanks Bill!). <span class="anchor" id="line-582"></span><span class="anchor" id="line-583"></span><p class="line874">Don't forget that you will also need the numpy.i file in the same directory. <span class="anchor" id="line-584"></span><span class="anchor" id="line-585"></span><p class="line867">
<h2 id="Setup_file_.28setup.py.29-3">Setup file (setup.py)</h2>
<span class="anchor" id="line-586"></span><span class="anchor" id="line-587"></span><p class="line862">This is my <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/setup_err.py">setup.py</a> file: <span class="anchor" id="line-588"></span><span class="anchor" id="line-589"></span><span class="anchor" id="line-590"></span><span class="anchor" id="line-591"></span><span class="anchor" id="line-592"></span><span class="anchor" id="line-593"></span><span class="anchor" id="line-594"></span><span class="anchor" id="line-595"></span><span class="anchor" id="line-596"></span><span class="anchor" id="line-597"></span><span class="anchor" id="line-598"></span><span class="anchor" id="line-599"></span><span class="anchor" id="line-600"></span><span class="anchor" id="line-601"></span><span class="anchor" id="line-602"></span><span class="anchor" id="line-603"></span><span class="anchor" id="line-604"></span><span class="anchor" id="line-605"></span><span class="anchor" id="line-606"></span><span class="anchor" id="line-607"></span><span class="anchor" id="line-608"></span><span class="anchor" id="line-609"></span><span class="anchor" id="line-610"></span><span class="anchor" id="line-611"></span><span class="anchor" id="line-612"></span><span class="anchor" id="line-613"></span><span class="anchor" id="line-614"></span><span class="anchor" id="line-615"></span><span class="anchor" id="line-616"></span><span class="anchor" id="line-617"></span><span class="anchor" id="line-618"></span><span class="anchor" id="line-619"></span><span class="anchor" id="line-620"></span><span class="anchor" id="line-621"></span><span class="anchor" id="line-1-47"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_1">   1</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_1"></span><span class="anchor" id="line-1-48"></span><span class="Comment">#! /usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_2">   2</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_2"></span><span class="anchor" id="line-2-17"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_3">   3</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_3"></span><span class="anchor" id="line-3-16"></span><span class="Comment"># System imports</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_4">   4</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_4"></span><span class="anchor" id="line-4-15"></span><span class="ResWord">from</span> <span class="ID">distutils.core</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_5">   5</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_5"></span><span class="anchor" id="line-5-15"></span><span class="ResWord">from</span> <span class="ID">distutils</span>      <span class="ResWord">import</span> <span class="ID">sysconfig</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_6">   6</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_6"></span><span class="anchor" id="line-6-15"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_7">   7</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_7"></span><span class="anchor" id="line-7-14"></span><span class="Comment"># Third-party modules - we depend on numpy for everything</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_8">   8</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_8"></span><span class="anchor" id="line-8-13"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_9">   9</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_9"></span><span class="anchor" id="line-9-13"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_10">  10</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_10"></span><span class="anchor" id="line-10-12"></span><span class="Comment"># Obtain the numpy include directory.  This logic works across numpy versions.</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_11">  11</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_11"></span><span class="anchor" id="line-11-12"></span><span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_12">  12</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_12"></span><span class="anchor" id="line-12-12"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_13">  13</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_13"></span><span class="anchor" id="line-13-12"></span><span class="ResWord">except</span> <span class="ID">AttributeError</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_14">  14</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_14"></span><span class="anchor" id="line-14-12"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_numpy_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_15">  15</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_15"></span><span class="anchor" id="line-15-12"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_16">  16</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_16"></span><span class="anchor" id="line-16-10"></span><span class="Comment"># err extension module</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_17">  17</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_17"></span><span class="anchor" id="line-17-9"></span><span class="ID">ezerr</span> = <span class="ID">Extension</span>(<span class="String">&quot;</span><span class="String">_ezerr</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_18">  18</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_18"></span><span class="anchor" id="line-18-9"></span>                   [<span class="String">&quot;</span><span class="String">ezerr.i</span><span class="String">&quot;</span>,<span class="String">&quot;</span><span class="String">ezerr.c</span><span class="String">&quot;</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_19">  19</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_19"></span><span class="anchor" id="line-19-9"></span>                   <span class="ID">include_dirs</span> = [<span class="ID">numpy_include</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_20">  20</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_20"></span><span class="anchor" id="line-20-9"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_21">  21</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_21"></span><span class="anchor" id="line-21-8"></span>                   <span class="ID">extra_compile_args</span> = [<span class="String">&quot;</span><span class="String">--verbose</span><span class="String">&quot;</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_22">  22</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_22"></span><span class="anchor" id="line-22-8"></span>                   )</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_23">  23</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_23"></span><span class="anchor" id="line-23-8"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_24">  24</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_24"></span><span class="anchor" id="line-24-8"></span><span class="Comment"># NumyTypemapTests setup</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_25">  25</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_25"></span><span class="anchor" id="line-25-7"></span><span class="ID">setup</span>(  <span class="ID">name</span>        = <span class="String">&quot;</span><span class="String">err test</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_26">  26</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_26"></span><span class="anchor" id="line-26-7"></span>        <span class="ID">description</span> = <span class="String">&quot;</span><span class="String">A simple test to demonstrate the use of errno and python exceptions</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_27">  27</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_27"></span><span class="anchor" id="line-27-7"></span>        <span class="ID">author</span>      = <span class="String">&quot;</span><span class="String">Egor Zindy</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_28">  28</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_28"></span><span class="anchor" id="line-28-7"></span>        <span class="ID">version</span>     = <span class="String">&quot;</span><span class="String">1.0</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_29">  29</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_29"></span><span class="anchor" id="line-29-5"></span>        <span class="ID">ext_modules</span> = [<span class="ID">ezerr</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_30">  30</a> </span><span class="LineAnchor" id="CA-c0750b5e11f479e7a8c4edd3dc5ef40c628c2c48_30"></span><span class="anchor" id="line-30-4"></span>        )</span>
</pre></div></div><span class="anchor" id="line-622"></span><span class="anchor" id="line-623"></span><p class="line867">
<h2 id="Compiling_the_module-3">Compiling the module</h2>
<span class="anchor" id="line-624"></span><p class="line874">The setup command-line is: <span class="anchor" id="line-625"></span><span class="anchor" id="line-626"></span><span class="anchor" id="line-627"></span><pre><span class="anchor" id="line-1-49"></span>python setup.py build</pre><span class="anchor" id="line-628"></span><span class="anchor" id="line-629"></span><p class="line874">or <span class="anchor" id="line-630"></span><span class="anchor" id="line-631"></span><p class="line867"><span class="anchor" id="line-632"></span><span class="anchor" id="line-633"></span><pre><span class="anchor" id="line-1-50"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-634"></span><span class="anchor" id="line-635"></span><p class="line874">depending on your environment. <span class="anchor" id="line-636"></span><span class="anchor" id="line-637"></span><p class="line867">
<h2 id="Testing_the_module-3">Testing the module</h2>
<span class="anchor" id="line-638"></span><p class="line862">If everything goes according to plan, there should be a <tt class="backtick">_ezerr.pyd</tt> file available in the <tt class="backtick">build\lib.XXX</tt> directory. You will need to copy the file in the directory where the <tt class="backtick">ezerr.py</tt> file is (generated by swig), in which case, the following will work (in python): <span class="anchor" id="line-639"></span><span class="anchor" id="line-640"></span><p class="line862">The test code <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/test_err.py">test_err.py</a> follows: <span class="anchor" id="line-641"></span><span class="anchor" id="line-642"></span><p class="line867"><span class="anchor" id="line-643"></span><span class="anchor" id="line-644"></span><span class="anchor" id="line-645"></span><span class="anchor" id="line-646"></span><span class="anchor" id="line-647"></span><span class="anchor" id="line-648"></span><span class="anchor" id="line-649"></span><span class="anchor" id="line-650"></span><span class="anchor" id="line-651"></span><span class="anchor" id="line-652"></span><span class="anchor" id="line-653"></span><span class="anchor" id="line-654"></span><span class="anchor" id="line-655"></span><span class="anchor" id="line-656"></span><span class="anchor" id="line-657"></span><span class="anchor" id="line-658"></span><span class="anchor" id="line-659"></span><span class="anchor" id="line-660"></span><span class="anchor" id="line-661"></span><span class="anchor" id="line-662"></span><span class="anchor" id="line-663"></span><span class="anchor" id="line-664"></span><span class="anchor" id="line-665"></span><span class="anchor" id="line-666"></span><span class="anchor" id="line-667"></span><span class="anchor" id="line-668"></span><span class="anchor" id="line-669"></span><span class="anchor" id="line-670"></span><span class="anchor" id="line-671"></span><span class="anchor" id="line-672"></span><span class="anchor" id="line-673"></span><span class="anchor" id="line-1-51"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-480acee7bb8e8db54efc10b732b5692308807418\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-480acee7bb8e8db54efc10b732b5692308807418" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_1">   1</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_1"></span><span class="anchor" id="line-1-52"></span><span class="ResWord">import</span> <span class="ID">traceback</span>,<span class="ID">sys</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_2">   2</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_2"></span><span class="anchor" id="line-2-18"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_3">   3</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_3"></span><span class="anchor" id="line-3-17"></span><span class="ResWord">import</span> <span class="ID">ezerr</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_4">   4</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_4"></span><span class="anchor" id="line-4-16"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_5">   5</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_5"></span><span class="anchor" id="line-5-16"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">--- testing ezerr.val() ---</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_6">   6</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_6"></span><span class="anchor" id="line-6-16"></span><span class="ID">a</span> = <span class="ID">numpy</span>.<span class="ID">arange</span>(<span class="Number">10</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_7">   7</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_7"></span><span class="anchor" id="line-7-15"></span><span class="ID">indexes</span> = [<span class="Number">5</span>,<span class="Number">20</span>,-<span class="Number">1</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_8">   8</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_8"></span><span class="anchor" id="line-8-14"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_9">   9</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_9"></span><span class="anchor" id="line-9-14"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ID">indexes</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_10">  10</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_10"></span><span class="anchor" id="line-10-13"></span>    <span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_11">  11</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_11"></span><span class="anchor" id="line-11-13"></span>        <span class="ID">value</span> = <span class="ID">ezerr</span>.<span class="ID">val</span>(<span class="ID">a</span>,<span class="ID">i</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_12">  12</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_12"></span><span class="anchor" id="line-12-13"></span>    <span class="ResWord">except</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_13">  13</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_13"></span><span class="anchor" id="line-13-13"></span>        <span class="ResWord">print</span> <span class="String">&quot;</span><span class="String">&gt;&gt; failed for index=</span><span class="String">%d</span><span class="String">&quot;</span> % <span class="ID">i</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_14">  14</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_14"></span><span class="anchor" id="line-14-13"></span>        <span class="ID">traceback</span>.<span class="ID">print_exc</span>(<span class="ResWord">file</span>=<span class="ID">sys</span>.<span class="ID">stdout</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_15">  15</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_15"></span><span class="anchor" id="line-15-13"></span>    <span class="ResWord">else</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_16">  16</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_16"></span><span class="anchor" id="line-16-11"></span>        <span class="ResWord">print</span> <span class="String">&quot;</span><span class="String">using ezerr.val() a[</span><span class="String">%d</span><span class="String">]=</span><span class="String">%d</span><span class="String"> - should be </span><span class="String">%d</span><span class="String">&quot;</span> % (<span class="ID">i</span>,<span class="ID">value</span>,<span class="ID">a</span>[<span class="ID">i</span>])</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_17">  17</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_17"></span><span class="anchor" id="line-17-10"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_18">  18</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_18"></span><span class="anchor" id="line-18-10"></span><span class="ResWord">print</span> <span class="String">&quot;</span><span class="SPChar">\n</span><span class="String">--- testing ezerr.alloc() ---</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_19">  19</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_19"></span><span class="anchor" id="line-19-10"></span><span class="ID">amounts</span> = [<span class="Number">1</span>,-<span class="Number">1</span>] <span class="Comment">#1 byte, -1 byte</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_20">  20</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_20"></span><span class="anchor" id="line-20-10"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_21">  21</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_21"></span><span class="anchor" id="line-21-9"></span><span class="ResWord">for</span> <span class="ID">n</span> <span class="ResWord">in</span> <span class="ID">amounts</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_22">  22</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_22"></span><span class="anchor" id="line-22-9"></span>    <span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_23">  23</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_23"></span><span class="anchor" id="line-23-9"></span>        <span class="ID">ezerr</span>.<span class="ID">alloc</span>(<span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_24">  24</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_24"></span><span class="anchor" id="line-24-9"></span>    <span class="ResWord">except</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_25">  25</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_25"></span><span class="anchor" id="line-25-8"></span>        <span class="ResWord">print</span> <span class="String">&quot;</span><span class="String">&gt;&gt; could not allocate </span><span class="String">%d</span><span class="String"> bytes</span><span class="String">&quot;</span> % <span class="ID">n</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_26">  26</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_26"></span><span class="anchor" id="line-26-8"></span>        <span class="ID">traceback</span>.<span class="ID">print_exc</span>(<span class="ResWord">file</span>=<span class="ID">sys</span>.<span class="ID">stdout</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_27">  27</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_27"></span><span class="anchor" id="line-27-8"></span>    <span class="ResWord">else</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-480acee7bb8e8db54efc10b732b5692308807418_28">  28</a> </span><span class="LineAnchor" id="CA-480acee7bb8e8db54efc10b732b5692308807418_28"></span><span class="anchor" id="line-28-8"></span>        <span class="ResWord">print</span> <span class="String">&quot;</span><span class="String">allocated (and deallocated) </span><span class="String">%d</span><span class="String"> bytes</span><span class="String">&quot;</span> % <span class="ID">n</span></span>
</pre></div></div><span class="anchor" id="line-674"></span><p class="line874">Launch test_err.py and the following will hopefully happen: <span class="anchor" id="line-675"></span><span class="anchor" id="line-676"></span><span class="anchor" id="line-677"></span><span class="anchor" id="line-678"></span><span class="anchor" id="line-679"></span><span class="anchor" id="line-680"></span><span class="anchor" id="line-681"></span><span class="anchor" id="line-682"></span><span class="anchor" id="line-683"></span><span class="anchor" id="line-684"></span><span class="anchor" id="line-685"></span><span class="anchor" id="line-686"></span><span class="anchor" id="line-687"></span><span class="anchor" id="line-688"></span><span class="anchor" id="line-689"></span><span class="anchor" id="line-690"></span><span class="anchor" id="line-691"></span><span class="anchor" id="line-692"></span><span class="anchor" id="line-693"></span><span class="anchor" id="line-694"></span><span class="anchor" id="line-695"></span><span class="anchor" id="line-696"></span><span class="anchor" id="line-697"></span><span class="anchor" id="line-698"></span><pre><span class="anchor" id="line-1-53"></span>~&gt; python test_err.py
<span class="anchor" id="line-2-19"></span>
<span class="anchor" id="line-3-18"></span>--- testing ezerr.val() ---
<span class="anchor" id="line-4-17"></span>using ezerr.val() a[5]=5 - should be 5
<span class="anchor" id="line-5-17"></span>&gt;&gt; failed for index=20
<span class="anchor" id="line-6-17"></span>Traceback (most recent call last):
<span class="anchor" id="line-7-16"></span>  File &quot;test_err.py&quot;, line 11, in &lt;module&gt;
<span class="anchor" id="line-8-15"></span>    value = ezerr.val(a,i)
<span class="anchor" id="line-9-15"></span>IndexError: Index out of range
<span class="anchor" id="line-10-14"></span>&gt;&gt; failed for index=-1
<span class="anchor" id="line-11-14"></span>Traceback (most recent call last):
<span class="anchor" id="line-12-14"></span>  File &quot;test_err.py&quot;, line 11, in &lt;module&gt;
<span class="anchor" id="line-13-14"></span>    value = ezerr.val(a,i)
<span class="anchor" id="line-14-14"></span>IndexError: Index out of range
<span class="anchor" id="line-15-14"></span>
<span class="anchor" id="line-16-12"></span>--- testing ezerr.alloc() ---
<span class="anchor" id="line-17-11"></span>allocated (and deallocated) 1 bytes
<span class="anchor" id="line-18-11"></span>&gt;&gt; could not allocate -1 bytes
<span class="anchor" id="line-19-11"></span>Traceback (most recent call last):
<span class="anchor" id="line-20-11"></span>  File &quot;test_err.py&quot;, line 23, in &lt;module&gt;
<span class="anchor" id="line-21-10"></span>    ezerr.alloc(n)
<span class="anchor" id="line-22-10"></span>MemoryError: Failed malloc()</pre><span class="anchor" id="line-699"></span><span class="anchor" id="line-700"></span><p class="line867">
<h1 id="Dot_product_example_.28from_Bill_Spotz.27s_article.29">Dot product example (from Bill Spotz's article)</h1>
<span class="anchor" id="line-701"></span><span class="anchor" id="line-702"></span><p class="line874">The last example given in Bill Spotz's artice is for a dot product function. Here is a fleshed-out version. <span class="anchor" id="line-703"></span><span class="anchor" id="line-704"></span><p class="line867">
<h2 id="The_C_source_.28dot.c_and_dot.h.29">The C source (dot.c and dot.h)</h2>
<span class="anchor" id="line-705"></span><span class="anchor" id="line-706"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/dot.h">dot.h</a> file: <span class="anchor" id="line-707"></span><span class="anchor" id="line-708"></span><span class="anchor" id="line-709"></span><span class="anchor" id="line-1-54"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e216cf78cb0eb1408dfbf9532d964fd1008e9cbf\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-e216cf78cb0eb1408dfbf9532d964fd1008e9cbf" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-e216cf78cb0eb1408dfbf9532d964fd1008e9cbf_1">   1</a> </span><span class="LineAnchor" id="CA-e216cf78cb0eb1408dfbf9532d964fd1008e9cbf_1"></span><span class="anchor" id="line-1-55"></span><span class="ResWord">double</span> <span class="ID">dot</span>(<span class="ResWord">int</span> <span class="ID">len</span>, <span class="ResWord">double</span>* <span class="ID">vec1</span>, <span class="ResWord">double</span>* <span class="ID">vec2</span>);</span>
</pre></div></div><span class="anchor" id="line-710"></span><span class="anchor" id="line-711"></span><p class="line862">Here is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/dot.c">dot.c</a> file: <span class="anchor" id="line-712"></span><span class="anchor" id="line-713"></span><span class="anchor" id="line-714"></span><span class="anchor" id="line-715"></span><span class="anchor" id="line-716"></span><span class="anchor" id="line-717"></span><span class="anchor" id="line-718"></span><span class="anchor" id="line-719"></span><span class="anchor" id="line-720"></span><span class="anchor" id="line-721"></span><span class="anchor" id="line-722"></span><span class="anchor" id="line-723"></span><span class="anchor" id="line-724"></span><span class="anchor" id="line-725"></span><span class="anchor" id="line-726"></span><span class="anchor" id="line-727"></span><span class="anchor" id="line-1-56"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_1">   1</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_1"></span><span class="anchor" id="line-1-57"></span><span class="Preprc">#</span><span class="Preprc">include &lt;stdio.h&gt;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_2">   2</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_2"></span><span class="anchor" id="line-2-20"></span><span class="Preprc"></span><span class="Preprc">#</span><span class="Preprc">include &quot;dot.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_3">   3</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_3"></span><span class="anchor" id="line-3-19"></span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_4">   4</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_4"></span><span class="anchor" id="line-4-18"></span><span class="ResWord">double</span> <span class="ID">dot</span>(<span class="ResWord">int</span> <span class="ID">len</span>, <span class="ResWord">double</span>* <span class="ID">vec1</span>, <span class="ResWord">double</span>* <span class="ID">vec2</span>)</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_5">   5</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_5"></span><span class="anchor" id="line-5-18"></span>{</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_6">   6</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_6"></span><span class="anchor" id="line-6-18"></span>    <span class="ResWord">int</span> <span class="ID">i</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_7">   7</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_7"></span><span class="anchor" id="line-7-17"></span>    <span class="ResWord">double</span> <span class="ID">d</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_8">   8</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_8"></span><span class="anchor" id="line-8-16"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_9">   9</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_9"></span><span class="anchor" id="line-9-16"></span>    <span class="ID">d</span> = <span class="Number">0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_10">  10</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_10"></span><span class="anchor" id="line-10-15"></span>    <span class="ResWord">for</span>(<span class="ID">i</span>=<span class="Number">0</span>;<span class="ID">i</span>&lt;<span class="ID">len</span>;<span class="ID">i</span>++)</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_11">  11</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_11"></span><span class="anchor" id="line-11-15"></span>        <span class="ID">d</span> += <span class="ID">vec1</span>[<span class="ID">i</span>]*<span class="ID">vec2</span>[<span class="ID">i</span>];</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_12">  12</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_12"></span><span class="anchor" id="line-12-15"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_13">  13</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_13"></span><span class="anchor" id="line-13-15"></span>    <span class="ResWord">return</span> <span class="ID">d</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_14">  14</a> </span><span class="LineAnchor" id="CA-c878fcfdc1f4d6ee62fd3c9e7d95858bc086a7db_14"></span><span class="anchor" id="line-14-15"></span>}</span>
</pre></div></div><span class="anchor" id="line-728"></span><span class="anchor" id="line-729"></span><p class="line867">
<h2 id="The_interface_files_.28dot.i_and_numpy.i.29">The interface files (dot.i and numpy.i)</h2>
<span class="anchor" id="line-730"></span><span class="anchor" id="line-731"></span><p class="line862">Here is the complete <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/dot.i">dot.i</a> file: <span class="anchor" id="line-732"></span><span class="anchor" id="line-733"></span><span class="anchor" id="line-734"></span><span class="anchor" id="line-735"></span><span class="anchor" id="line-736"></span><span class="anchor" id="line-737"></span><span class="anchor" id="line-738"></span><span class="anchor" id="line-739"></span><span class="anchor" id="line-740"></span><span class="anchor" id="line-741"></span><span class="anchor" id="line-742"></span><span class="anchor" id="line-743"></span><span class="anchor" id="line-744"></span><span class="anchor" id="line-745"></span><span class="anchor" id="line-746"></span><span class="anchor" id="line-747"></span><span class="anchor" id="line-748"></span><span class="anchor" id="line-749"></span><span class="anchor" id="line-750"></span><span class="anchor" id="line-751"></span><span class="anchor" id="line-752"></span><span class="anchor" id="line-753"></span><span class="anchor" id="line-754"></span><span class="anchor" id="line-755"></span><span class="anchor" id="line-756"></span><span class="anchor" id="line-757"></span><span class="anchor" id="line-758"></span><span class="anchor" id="line-759"></span><span class="anchor" id="line-760"></span><span class="anchor" id="line-761"></span><span class="anchor" id="line-1-58"></span><div class="highlight cpp"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_1">   1</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_1"></span><span class="anchor" id="line-1-59"></span>%<span class="ID">module</span> <span class="ID">dot</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_2">   2</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_2"></span><span class="anchor" id="line-2-21"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_3">   3</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_3"></span><span class="anchor" id="line-3-20"></span>%{</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_4">   4</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_4"></span><span class="anchor" id="line-4-19"></span>    <span class="Preprc">#</span><span class="Preprc">define SWIG_FILE_WITH_INIT</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_5">   5</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_5"></span><span class="anchor" id="line-5-19"></span><span class="Preprc"></span>    <span class="Preprc">#</span><span class="Preprc">include &quot;dot.h&quot;</span><span class="Preprc"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_6">   6</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_6"></span><span class="anchor" id="line-6-19"></span><span class="Preprc"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_7">   7</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_7"></span><span class="anchor" id="line-7-18"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_8">   8</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_8"></span><span class="anchor" id="line-8-17"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">numpy.i</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_9">   9</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_9"></span><span class="anchor" id="line-9-17"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_10">  10</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_10"></span><span class="anchor" id="line-10-16"></span>%<span class="ID">init</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_11">  11</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_11"></span><span class="anchor" id="line-11-16"></span>    <span class="ID">import_array</span>();</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_12">  12</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_12"></span><span class="anchor" id="line-12-16"></span>%}</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_13">  13</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_13"></span><span class="anchor" id="line-13-16"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_14">  14</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_14"></span><span class="anchor" id="line-14-16"></span>%<span class="ID">apply</span> (<span class="ResWord">int</span> <span class="ID">DIM1</span>, <span class="ResWord">double</span>* <span class="ID">IN_ARRAY1</span>) {(<span class="ResWord">int</span> <span class="ID">len1</span>, <span class="ResWord">double</span>* <span class="ID">vec1</span>), (<span class="ResWord">int</span> <span class="ID">len2</span>, <span class="ResWord">double</span>* <span class="ID">vec2</span>)}</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_15">  15</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_15"></span><span class="anchor" id="line-15-15"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_16">  16</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_16"></span><span class="anchor" id="line-16-13"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_17">  17</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_17"></span><span class="anchor" id="line-17-12"></span>%<span class="ID">include</span> <span class="String">&quot;</span><span class="String">dot.h</span><span class="String">&quot;</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_18">  18</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_18"></span><span class="anchor" id="line-18-12"></span>%<span class="ID">rename</span> (<span class="ID">dot</span>) <span class="ID">my_dot</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_19">  19</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_19"></span><span class="anchor" id="line-19-12"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_20">  20</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_20"></span><span class="anchor" id="line-20-12"></span>%<span class="ResWord">inline</span> %{</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_21">  21</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_21"></span><span class="anchor" id="line-21-11"></span>    <span class="ResWord">double</span> <span class="ID">my_dot</span>(<span class="ResWord">int</span> <span class="ID">len1</span>, <span class="ResWord">double</span>* <span class="ID">vec1</span>, <span class="ResWord">int</span> <span class="ID">len2</span>, <span class="ResWord">double</span>* <span class="ID">vec2</span>) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_22">  22</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_22"></span><span class="anchor" id="line-22-11"></span>    <span class="ResWord">if</span> (<span class="ID">len1</span> != <span class="ID">len2</span>) {</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_23">  23</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_23"></span><span class="anchor" id="line-23-10"></span>        <span class="ID">PyErr_Format</span>(<span class="ID">PyExc_ValueError</span>, <span class="String">&quot;</span><span class="String">Arrays of lengths (%d,%d) given</span><span class="String">&quot;</span>, <span class="ID">len1</span>, <span class="ID">len2</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_24">  24</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_24"></span><span class="anchor" id="line-24-10"></span>        <span class="ResWord">return</span> <span class="Number">0.0</span>;</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_25">  25</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_25"></span><span class="anchor" id="line-25-9"></span>    }</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_26">  26</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_26"></span><span class="anchor" id="line-26-9"></span>    <span class="ResWord">return</span> <span class="ID">dot</span>(<span class="ID">len1</span>, <span class="ID">vec1</span>, <span class="ID">vec2</span>);</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_27">  27</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_27"></span><span class="anchor" id="line-27-9"></span>}</span>
<span class="line"><span class="LineNumber"><a href="#CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_28">  28</a> </span><span class="LineAnchor" id="CA-78ef6784aab5bd2dabf3429f558dfa8906687d1a_28"></span><span class="anchor" id="line-28-9"></span>%}</span>
</pre></div></div><span class="anchor" id="line-762"></span><span class="anchor" id="line-763"></span><p class="line867">
<h2 id="Setup_file_.28setup.py.29-4">Setup file (setup.py)</h2>
<span class="anchor" id="line-764"></span><span class="anchor" id="line-765"></span><p class="line862">This is the <a class="http" href="../../external.html?link=http://ezwidgets.googlecode.com/svn/trunk/numpy/setup_dot.py">setup.py</a> file: <span class="anchor" id="line-766"></span><span class="anchor" id="line-767"></span><p class="line867"><span class="anchor" id="line-768"></span><span class="anchor" id="line-769"></span><span class="anchor" id="line-770"></span><span class="anchor" id="line-771"></span><span class="anchor" id="line-772"></span><span class="anchor" id="line-773"></span><span class="anchor" id="line-774"></span><span class="anchor" id="line-775"></span><span class="anchor" id="line-776"></span><span class="anchor" id="line-777"></span><span class="anchor" id="line-778"></span><span class="anchor" id="line-779"></span><span class="anchor" id="line-780"></span><span class="anchor" id="line-781"></span><span class="anchor" id="line-782"></span><span class="anchor" id="line-783"></span><span class="anchor" id="line-784"></span><span class="anchor" id="line-785"></span><span class="anchor" id="line-786"></span><span class="anchor" id="line-787"></span><span class="anchor" id="line-788"></span><span class="anchor" id="line-789"></span><span class="anchor" id="line-790"></span><span class="anchor" id="line-791"></span><span class="anchor" id="line-792"></span><span class="anchor" id="line-793"></span><span class="anchor" id="line-794"></span><span class="anchor" id="line-795"></span><span class="anchor" id="line-796"></span><span class="anchor" id="line-1-60"></span><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e73b147a345180f3c521585488dc02e6c4b9dd81\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81" lang="en"><span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_1">   1</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_1"></span><span class="anchor" id="line-1-61"></span><span class="Comment">#! /usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_2">   2</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_2"></span><span class="anchor" id="line-2-22"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_3">   3</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_3"></span><span class="anchor" id="line-3-21"></span><span class="Comment"># System imports</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_4">   4</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_4"></span><span class="anchor" id="line-4-20"></span><span class="ResWord">from</span> <span class="ID">distutils.core</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_5">   5</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_5"></span><span class="anchor" id="line-5-20"></span><span class="ResWord">from</span> <span class="ID">distutils</span>      <span class="ResWord">import</span> <span class="ID">sysconfig</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_6">   6</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_6"></span><span class="anchor" id="line-6-20"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_7">   7</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_7"></span><span class="anchor" id="line-7-19"></span><span class="Comment"># Third-party modules - we depend on numpy for everything</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_8">   8</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_8"></span><span class="anchor" id="line-8-18"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_9">   9</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_9"></span><span class="anchor" id="line-9-18"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_10">  10</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_10"></span><span class="anchor" id="line-10-17"></span><span class="Comment"># Obtain the numpy include directory.  This logic works across numpy versions.</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_11">  11</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_11"></span><span class="anchor" id="line-11-17"></span><span class="ResWord">try</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_12">  12</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_12"></span><span class="anchor" id="line-12-17"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_13">  13</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_13"></span><span class="anchor" id="line-13-17"></span><span class="ResWord">except</span> <span class="ID">AttributeError</span>:</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_14">  14</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_14"></span><span class="anchor" id="line-14-17"></span>    <span class="ID">numpy_include</span> = <span class="ID">numpy</span>.<span class="ID">get_numpy_include</span>()</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_15">  15</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_15"></span><span class="anchor" id="line-15-16"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_16">  16</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_16"></span><span class="anchor" id="line-16-14"></span><span class="Comment"># dot extension module</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_17">  17</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_17"></span><span class="anchor" id="line-17-13"></span><span class="ID">_dot</span> = <span class="ID">Extension</span>(<span class="String">&quot;</span><span class="String">_dot</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_18">  18</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_18"></span><span class="anchor" id="line-18-13"></span>                   [<span class="String">&quot;</span><span class="String">dot.i</span><span class="String">&quot;</span>,<span class="String">&quot;</span><span class="String">dot.c</span><span class="String">&quot;</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_19">  19</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_19"></span><span class="anchor" id="line-19-13"></span>                   <span class="ID">include_dirs</span> = [<span class="ID">numpy_include</span>],</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_20">  20</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_20"></span><span class="anchor" id="line-20-13"></span>                   )</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_21">  21</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_21"></span><span class="anchor" id="line-21-12"></span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_22">  22</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_22"></span><span class="anchor" id="line-22-12"></span><span class="Comment"># dot setup</span></span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_23">  23</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_23"></span><span class="anchor" id="line-23-11"></span><span class="ID">setup</span>(  <span class="ID">name</span>        = <span class="String">&quot;</span><span class="String">Dot product</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_24">  24</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_24"></span><span class="anchor" id="line-24-11"></span>        <span class="ID">description</span> = <span class="String">&quot;</span><span class="String">Function that performs a dot product (numpy.i: a SWIG Interface File for NumPy)</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_25">  25</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_25"></span><span class="anchor" id="line-25-10"></span>        <span class="ID">author</span>      = <span class="String">&quot;</span><span class="String">Egor Zindy (based on the setup.py file available in the numpy tree)</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_26">  26</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_26"></span><span class="anchor" id="line-26-10"></span>        <span class="ID">version</span>     = <span class="String">&quot;</span><span class="String">1.0</span><span class="String">&quot;</span>,</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_27">  27</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_27"></span><span class="anchor" id="line-27-10"></span>        <span class="ID">ext_modules</span> = [<span class="ID">_dot</span>]</span>
<span class="line"><span class="LineNumber"><a href="#CA-e73b147a345180f3c521585488dc02e6c4b9dd81_28">  28</a> </span><span class="LineAnchor" id="CA-e73b147a345180f3c521585488dc02e6c4b9dd81_28"></span><span class="anchor" id="line-28-10"></span>        )</span>
</pre></div></div><span class="anchor" id="line-797"></span><span class="anchor" id="line-798"></span><p class="line867">
<h2 id="Compiling_the_module-4">Compiling the module</h2>
<span class="anchor" id="line-799"></span><p class="line874">The setup command-line is: <span class="anchor" id="line-800"></span><span class="anchor" id="line-801"></span><span class="anchor" id="line-802"></span><pre><span class="anchor" id="line-1-62"></span>python setup.py build</pre><span class="anchor" id="line-803"></span><span class="anchor" id="line-804"></span><p class="line874">or <span class="anchor" id="line-805"></span><span class="anchor" id="line-806"></span><p class="line867"><span class="anchor" id="line-807"></span><span class="anchor" id="line-808"></span><pre><span class="anchor" id="line-1-63"></span>python setup.py build --compiler=mingw32</pre><span class="anchor" id="line-809"></span><span class="anchor" id="line-810"></span><p class="line874">depending on your environment. <span class="anchor" id="line-811"></span><span class="anchor" id="line-812"></span><span class="anchor" id="line-813"></span><p class="line867">
<h2 id="Testing">Testing</h2>
<span class="anchor" id="line-814"></span><p class="line862">If everything goes according to plan, there should be a <tt class="backtick">_dot.pyd</tt> file available in the <tt class="backtick">build\lib.XXX</tt> directory. You will need to copy the file in the directory where the <tt class="backtick">dot.py</tt> file is (generated by swig), in which case, the following will work (in python): <span class="anchor" id="line-815"></span><span class="anchor" id="line-816"></span><p class="line867"><span class="anchor" id="line-817"></span><span class="anchor" id="line-818"></span><span class="anchor" id="line-819"></span><span class="anchor" id="line-820"></span><pre><span class="anchor" id="line-1-64"></span>&gt;&gt;&gt; import dot
<span class="anchor" id="line-2-23"></span>&gt;&gt;&gt; dot.dot([1,2,3],[1,2,3])
<span class="anchor" id="line-3-22"></span>14.0</pre><span class="anchor" id="line-821"></span><span class="anchor" id="line-822"></span><p class="line867">
<h1 id="Conclusion">Conclusion</h1>
<span class="anchor" id="line-823"></span><p class="line874">That's all folks (for now)! As usual, comments welcome! <span class="anchor" id="line-824"></span><span class="anchor" id="line-825"></span><ul><li><p class="line891"><strong>TODO</strong>: Code clean-up and moving the examples over to the !SciPy/!<a class="nonexistent" href="../NumPy.html">NumPy</a> repository? <span class="anchor" id="line-826"></span><span class="anchor" id="line-827"></span></li></ul><p class="line874">Regards, <span class="anchor" id="line-828"></span>Egor <span class="anchor" id="line-829"></span><span class="anchor" id="line-830"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="line-831"></span><a href="../CategoryCookbook.html">Category<strong class="highlight">Cookbook</strong></a> <span class="anchor" id="line-832"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">SciPy: Cookbook/SWIG_NumPy_examples  (last edited 2015-10-24 17:48:23 by <span title="">anonymous</span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbattachments" href="SWIG_NumPy_examples37dc.html?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="../../external.html?link=http://localhost:8080/Cookbook/SWIG_NumPy_examples">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="../../external.html?link=http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="../../external.html?link=http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="../../external.html?link=http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>

<!-- Mirrored from localhost:8080/Cookbook/SWIG_NumPy_examples?highlight=%28%28Cookbook%7CSWIG_Memory_Deallocation%29%29 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 29 Oct 2015 23:19:06 GMT -->
</html>

